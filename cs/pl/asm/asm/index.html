<!DOCTYPE html><html lang="zh" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Wu-wu-u">
      
      
        <link rel="canonical" href="https://github.com/Wu-wu-u/Notebooks/cs/pl/asm/asm/">
      
      
        <link rel="prev" href="../../python/CS61A/object/">
      
      
        <link rel="next" href="../../../systems/Verilog/verilog/">
      
      
      <link rel="icon" href="../../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>x86 汇编语言 - Wu-wu-u's Notebooks</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M22%2012a10%2010%200%200%201-10%2010A10%2010%200%200%201%202%2012%2010%2010%200%200%201%2012%202a10%2010%200%200%201%2010%2010M6%2013h8l-3.5%203.5%201.42%201.42L17.84%2012l-5.92-5.92L10.5%207.5%2014%2011H6z%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../../../css/custom.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.18/dist/katex.min.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#x86" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../.." title="Wu-wu-u's Notebooks" class="md-header__button md-logo" aria-label="Wu-wu-u's Notebooks" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 4v6l-2-2-2 2V4H9v16h10V4zM3 7V5h2V4a2 2 0 0 1 2-2h12c1.05 0 2 .95 2 2v16c0 1.05-.95 2-2 2H7c-1.05 0-2-.95-2-2v-1H3v-2h2v-4H3v-2h2V7zm2-2v2h2V5zm0 14h2v-2H5zm0-6h2v-2H5z"></path></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Wu-wu-u's Notebooks
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              x86 汇编语言
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo" aria-hidden="true" type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Wu-wu-u/Notebooks" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
  </div>
  <div class="md-source__repository">
    Wu-wu-u/Notebooks
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../.." class="md-tabs__link">
          
  
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../" class="md-tabs__link">
          
  
  
    
  
  Computer Science

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../others/" class="md-tabs__link">
          
  
  
    
  
  Others

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Wu-wu-u's Notebooks" class="md-nav__button md-logo" aria-label="Wu-wu-u's Notebooks" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 4v6l-2-2-2 2V4H9v16h10V4zM3 7V5h2V4a2 2 0 0 1 2-2h12c1.05 0 2 .95 2 2v16c0 1.05-.95 2-2 2H7c-1.05 0-2-.95-2-2v-1H3v-2h2v-4H3v-2h2V7zm2-2v2h2V5zm0 14h2v-2H5zm0-6h2v-2H5z"></path></svg>

    </a>
    Wu-wu-u's Notebooks
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Wu-wu-u/Notebooks" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
  </div>
  <div class="md-source__repository">
    Wu-wu-u/Notebooks
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Computer Science
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Computer Science
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    编程语言
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            编程语言
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1">
        
          
          <label class="md-nav__link" for="__nav_2_2_1" id="__nav_2_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    C/C++
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1">
            <span class="md-nav__icon md-icon"></span>
            C/C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c_cpp/C/c/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C语言
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c_cpp/CPP/cpp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C++
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2">
        
          
          <label class="md-nav__link" for="__nav_2_2_2" id="__nav_2_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    python
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/Syntax/syntax/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基础语法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../python/CS61A/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    CS61A
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2_2_2" id="__nav_2_2_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            CS61A
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/CS61A/cs61a/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    函数与列表
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/CS61A/object/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    面向对象编程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    x86 汇编语言
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    x86 汇编语言
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      读写
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-2" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      标号
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsprintf" class="md-nav__link">
    <span class="md-ellipsis">
      wsprintf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#messageboxa" class="md-nav__link">
    <span class="md-ellipsis">
      MessageboxA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data" class="md-nav__link">
    <span class="md-ellipsis">
      .data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      打印
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-3" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 3
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#td" class="md-nav__link">
    <span class="md-ellipsis">
      td调试
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gets" class="md-nav__link">
    <span class="md-ellipsis">
      gets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-4" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 4
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 4">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      小端规则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      汇编器指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      强制类型转换
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      数组
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-5" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 5
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-6" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 6
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 6">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      地址
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      寄存器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-7" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 7
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 7">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      显卡相关输出
    </span>
  </a>
  
    <nav class="md-nav" aria-label="显卡相关输出">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      图形模式编程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assume" class="md-nav__link">
    <span class="md-ellipsis">
      assume
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      远近指针
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-8" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 8
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 8">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      堆栈
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-9" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 9
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 9">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fl" class="md-nav__link">
    <span class="md-ellipsis">
      FL标志寄存器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FL标志寄存器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cf" class="md-nav__link">
    <span class="md-ellipsis">
      进位标志 CF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zf" class="md-nav__link">
    <span class="md-ellipsis">
      零标志 ZF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sf" class="md-nav__link">
    <span class="md-ellipsis">
      符号标志 SF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#of" class="md-nav__link">
    <span class="md-ellipsis">
      溢出标志 OF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pf" class="md-nav__link">
    <span class="md-ellipsis">
      奇偶校验标志 PF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#af" class="md-nav__link">
    <span class="md-ellipsis">
      辅助进位标志 AF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#df" class="md-nav__link">
    <span class="md-ellipsis">
      方向标志 DF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if" class="md-nav__link">
    <span class="md-ellipsis">
      中断标志 IF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tf" class="md-nav__link">
    <span class="md-ellipsis">
      陷阱标志 TF
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-10" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 10
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 10">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      端口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      再谈寻址方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      寄存器交换指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      乘除法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="乘除法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mul" class="md-nav__link">
    <span class="md-ellipsis">
      mul
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#div" class="md-nav__link">
    <span class="md-ellipsis">
      div
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      除法溢出
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-11" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 11
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 11">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      地址传送指令
    </span>
  </a>
  
    <nav class="md-nav" aria-label="地址传送指令">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lea" class="md-nav__link">
    <span class="md-ellipsis">
      lea
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      引：远近指针
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-lds" class="md-nav__link">
    <span class="md-ellipsis">
      les, lds
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      符号扩充指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      零扩充指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      换码指令（查表指令）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      加法指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      减法指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      跳转指令
    </span>
  </a>
  
    <nav class="md-nav" aria-label="跳转指令">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ja-jb-jae-jbe" class="md-nav__link">
    <span class="md-ellipsis">
      ja, jb, jae, jbe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jg-jl-jge-jle" class="md-nav__link">
    <span class="md-ellipsis">
      jg, jl, jge, jle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      短跳、近跳、远跳
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loop" class="md-nav__link">
    <span class="md-ellipsis">
      循环指令：LOOP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-12" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 12
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 12">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      浮点数运算
    </span>
  </a>
  
    <nav class="md-nav" aria-label="浮点数运算">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fld-fild-fst-fstp" class="md-nav__link">
    <span class="md-ellipsis">
      fld, fild, fst, fstp
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      修改中断向量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#call-ret" class="md-nav__link">
    <span class="md-ellipsis">
      函数调用 call, ret
    </span>
  </a>
  
    <nav class="md-nav" aria-label="函数调用 call, ret">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#retf" class="md-nav__link">
    <span class="md-ellipsis">
      远调用，retf
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#int-iret" class="md-nav__link">
    <span class="md-ellipsis">
      int, iret
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-13" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 13
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 13">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      逻辑运算指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      移位指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      字符串操作指令
    </span>
  </a>
  
    <nav class="md-nav" aria-label="字符串操作指令">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      字符串传送指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      字符串比较指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      字符串扫描指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      字符串读写
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-14" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 14
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 14">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#__cdecl" class="md-nav__link">
    <span class="md-ellipsis">
      __cdecl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      动态变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      递归
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      考试
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3">
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    计算机系统
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            计算机系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/Verilog/verilog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Verilog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../systems/LCDF/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    数字逻辑设计
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            数字逻辑设计
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/LCDF/Chapter1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter1  Digital Systems and Information
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/LCDF/Chapter2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter2  Combinational Logic Circuits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/LCDF/Chapter3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter3  Combinational Logic Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/LCDF/Chapter4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter4  Sequential Circuits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/LCDF/Chapter5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter5  Digital Hardware Implementation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/LCDF/Chapter6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter6  Registers &amp; Register Transfers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/LCDF/Chapter7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter7  Memory Basics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../systems/CO/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    计算机组成
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            计算机组成
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/CO/preface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.Preface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/CO/instruction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.Instructions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/CO/arithmetic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.Arithmetic
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/CO/processor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.Processor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/CO/cache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.Cache
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/CO/IO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.I/O
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../systems/CA/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    计算机体系结构
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3_4" id="__nav_2_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_4">
            <span class="md-nav__icon md-icon"></span>
            计算机体系结构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/CA/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ch1 导论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/CA/ch2.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ch2 Cache
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/CA/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ch3 指令级并行
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/CA/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ch4 DLP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/CA/ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ch5 TLP
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_5">
        
          
          <label class="md-nav__link" for="__nav_2_3_5" id="__nav_2_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    操作系统原理(NJU)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_5">
            <span class="md-nav__icon md-icon"></span>
            操作系统原理(NJU)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/OS/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    绪论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../systems/OS/virtualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    虚拟化
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4">
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    算法相关
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            算法相关
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_1">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../algorithm/FDS/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    数据结构基础
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4_1" id="__nav_2_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_1">
            <span class="md-nav__icon md-icon"></span>
            数据结构基础
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/FDS/chapter2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 2 Algorithm Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/FDS/chapter3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 3 Lists,Stacks,and Queues
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/FDS/chapter4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 4 Trees
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/FDS/chapter5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 5 Priority Queues
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/FDS/chapter6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 6 Sorting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/FDS/chapter7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 7 Hashing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/FDS/chapter8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 8 The Disjoint Set
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/FDS/chapter9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 9 Graph Algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/FDS/problems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    题目集
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../algorithm/ADS/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    高级数据结构
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4_2" id="__nav_2_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_2">
            <span class="md-nav__icon md-icon"></span>
            高级数据结构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/amortized/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Amortized analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec1|Avl Trees &amp; Splay Trees
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec2|Red Black Trees &amp; B+ Trees
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec3|Inverted File Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec4|Leftise Heaps &amp; Skew Heaps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec5|Binomial Queue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec6|Search &amp; Backtracing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec7|Divide &amp; Conquer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec8|Dynamic Programming
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec9|Greedy Algorithm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec10|NP completeness
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec11|Approximation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec12|Local Search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec13|Randomized Algorithm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec14|Parallel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/ADS/lec15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    lec15|External Sort
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5">
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    理论相关
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            理论相关
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_1">
        
          
          <label class="md-nav__link" for="__nav_2_5_1" id="__nav_2_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    离散数学
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5_1">
            <span class="md-nav__icon md-icon"></span>
            离散数学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../theories/Discrete_Math/chapter1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 1 Logic and Proofs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../theories/Discrete_Math/chapter2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 2 Basic Structures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../theories/Discrete_Math/chapter3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 3 Algorithm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../theories/Discrete_Math/chapter4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 4 Number Theory and Cryptography
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../theories/Discrete_Math/chapter5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 5 Induction and Recursion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../theories/Discrete_Math/chapter6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 6 Counting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../theories/Discrete_Math/chapter8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 8 Advanced Counting Techniques
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../theories/Discrete_Math/chapter9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 9 Relations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../theories/Discrete_Math/chapter10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 10 Graphs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../theories/Discrete_Math/chapter11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 11 Trees
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6">
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    人工智能
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            人工智能
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../AI/basic_module/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基础库的使用
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7">
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    其他课程
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            其他课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_1">
        
          
          <label class="md-nav__link" for="__nav_2_7_1" id="__nav_2_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    数据库系统
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_1">
            <span class="md-nav__icon md-icon"></span>
            数据库系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/DB/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/DB/relationalModel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Relational Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/DB/sql_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction to SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/DB/intermediate_sql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    中级SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/DB/advanced_sql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    高级SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/DB/ODBC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ODBC使用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/DB/ER_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    实体-关系模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/DB/design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关系数据库设计
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/DB/concurrency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    并发控制
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/DB/recovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    故障恢复
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8">
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    工具相关
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            工具相关
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/git/git/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/latex/latex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Latex
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/vim/vim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vim
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/gdb/gdb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/make/make/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Make
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/docker/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8_7">
        
          
          <label class="md-nav__link" for="__nav_2_8_7" id="__nav_2_8_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Mkdocs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_8_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8_7">
            <span class="md-nav__icon md-icon"></span>
            Mkdocs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/mkdocs/Build_Website/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build Website
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/mkdocs/mkdocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    配置
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../others/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Others
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Others
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2">
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    课程记录
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            课程记录
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../others/lessons/CTF/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    CTF101
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2_1" id="__nav_3_2_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1">
            <span class="md-nav__icon md-icon"></span>
            CTF101
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../others/lessons/CTF/web/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../others/lessons/CTF/crypto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Crypto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../others/lessons/CTF/reverse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reverse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../others/lessons/CTF/pwn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pwn
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../others/lessons/CTF/misc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Misc
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_2">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../others/lessons/WX/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    微信小程序开发
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_2">
            <span class="md-nav__icon md-icon"></span>
            微信小程序开发
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../others/lessons/WX/basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTML基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../others/lessons/WX/css/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CSS基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../others/lessons/WX/js/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JavaScript基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../others/lessons/WX/reg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JS RegExp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../others/lessons/WX/tips/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tips
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../others/lessons/WX/dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    微信开发者工具
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_3">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../others/lessons/WLAN/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    无线网络应用
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_3">
            <span class="md-nav__icon md-icon"></span>
            无线网络应用
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../others/lessons/WLAN/wlan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    课程知识
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      读写
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-2" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      标号
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wsprintf" class="md-nav__link">
    <span class="md-ellipsis">
      wsprintf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#messageboxa" class="md-nav__link">
    <span class="md-ellipsis">
      MessageboxA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data" class="md-nav__link">
    <span class="md-ellipsis">
      .data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      打印
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-3" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 3
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#td" class="md-nav__link">
    <span class="md-ellipsis">
      td调试
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gets" class="md-nav__link">
    <span class="md-ellipsis">
      gets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-4" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 4
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 4">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      小端规则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      汇编器指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      强制类型转换
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      数组
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-5" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 5
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-6" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 6
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 6">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      地址
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      寄存器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-7" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 7
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 7">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      显卡相关输出
    </span>
  </a>
  
    <nav class="md-nav" aria-label="显卡相关输出">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      图形模式编程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assume" class="md-nav__link">
    <span class="md-ellipsis">
      assume
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      远近指针
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-8" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 8
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 8">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      堆栈
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-9" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 9
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 9">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fl" class="md-nav__link">
    <span class="md-ellipsis">
      FL标志寄存器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FL标志寄存器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cf" class="md-nav__link">
    <span class="md-ellipsis">
      进位标志 CF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zf" class="md-nav__link">
    <span class="md-ellipsis">
      零标志 ZF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sf" class="md-nav__link">
    <span class="md-ellipsis">
      符号标志 SF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#of" class="md-nav__link">
    <span class="md-ellipsis">
      溢出标志 OF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pf" class="md-nav__link">
    <span class="md-ellipsis">
      奇偶校验标志 PF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#af" class="md-nav__link">
    <span class="md-ellipsis">
      辅助进位标志 AF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#df" class="md-nav__link">
    <span class="md-ellipsis">
      方向标志 DF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if" class="md-nav__link">
    <span class="md-ellipsis">
      中断标志 IF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tf" class="md-nav__link">
    <span class="md-ellipsis">
      陷阱标志 TF
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-10" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 10
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 10">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      端口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      再谈寻址方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      寄存器交换指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      乘除法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="乘除法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mul" class="md-nav__link">
    <span class="md-ellipsis">
      mul
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#div" class="md-nav__link">
    <span class="md-ellipsis">
      div
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      除法溢出
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-11" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 11
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 11">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      地址传送指令
    </span>
  </a>
  
    <nav class="md-nav" aria-label="地址传送指令">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lea" class="md-nav__link">
    <span class="md-ellipsis">
      lea
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      引：远近指针
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-lds" class="md-nav__link">
    <span class="md-ellipsis">
      les, lds
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      符号扩充指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      零扩充指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      换码指令（查表指令）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      加法指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      减法指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      跳转指令
    </span>
  </a>
  
    <nav class="md-nav" aria-label="跳转指令">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ja-jb-jae-jbe" class="md-nav__link">
    <span class="md-ellipsis">
      ja, jb, jae, jbe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jg-jl-jge-jle" class="md-nav__link">
    <span class="md-ellipsis">
      jg, jl, jge, jle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      短跳、近跳、远跳
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loop" class="md-nav__link">
    <span class="md-ellipsis">
      循环指令：LOOP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-12" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 12
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 12">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      浮点数运算
    </span>
  </a>
  
    <nav class="md-nav" aria-label="浮点数运算">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fld-fild-fst-fstp" class="md-nav__link">
    <span class="md-ellipsis">
      fld, fild, fst, fstp
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      修改中断向量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#call-ret" class="md-nav__link">
    <span class="md-ellipsis">
      函数调用 call, ret
    </span>
  </a>
  
    <nav class="md-nav" aria-label="函数调用 call, ret">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#retf" class="md-nav__link">
    <span class="md-ellipsis">
      远调用，retf
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#int-iret" class="md-nav__link">
    <span class="md-ellipsis">
      int, iret
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-13" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 13
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 13">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      逻辑运算指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      移位指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      字符串操作指令
    </span>
  </a>
  
    <nav class="md-nav" aria-label="字符串操作指令">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      字符串传送指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      字符串比较指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      字符串扫描指令
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      字符串读写
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lec-14" class="md-nav__link">
    <span class="md-ellipsis">
      Lec 14
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lec 14">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#__cdecl" class="md-nav__link">
    <span class="md-ellipsis">
      __cdecl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      动态变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      递归
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      考试
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="x86">X86 汇编语言<a class="headerlink" href="#x86" title="Permanent link">¶</a></h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"></path></svg></span> 约 7943 个字 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M360.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m64.6 136.1c-12.5 12.5-12.5 32.8 0 45.3l73.4 73.4-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0zm-274.7 0c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l73.3-73.4c12.5-12.5 12.5-32.8 0-45.3z"></path></svg></span> 1032 行代码 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"></path></svg></span> 13 张图片 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"></path></svg></span> 预计阅读时间 39 分钟</p>
</div>
<h2 id="_1">读写<a class="headerlink" href="#_1" title="Permanent link">¶</a></h2>
<ul>
<li>在 x86 汇编语言中，使用 <code>int 21h</code> 中断调用来执行 DOS 服务。不同的 <code>ah</code> 寄存器值指定不同的服务。以下是一些常用的与读取和输入相关的 int 21h 调用及其 ah 值：</li>
</ul>
<table>
<thead>
<tr>
<th>类型</th>
<th>ah</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>读取字符（带回显）</td>
<td>ah=1</td>
<td>从标准输入读取一个字符，读取的字符在 <code>al</code> 寄存器中</td>
</tr>
<tr>
<td>显示字符</td>
<td>ah=2</td>
<td>将 <code>dl</code> 寄存器中的字符显示在stdout</td>
</tr>
<tr>
<td>读取字符串</td>
<td>ah=0Ah</td>
<td>从标准输入读取一个字符串到缓冲区<code>ds:[dx]</code>，直到遇到回车键（Enter）</td>
</tr>
</tbody>
</table>
<h2 id="lec-2">Lec 2<a class="headerlink" href="#lec-2" title="Permanent link">¶</a></h2>
<h3 id="_2">标号<a class="headerlink" href="#_2" title="Permanent link">¶</a></h3>
<ul>
<li>在汇编语言中，<strong>标号（Label）</strong>是指向代码或数据位置的标识符。标号允许程序员在汇编代码中引用<strong>内存地址</strong>，而不需要知道具体的地址值。这使得代码更易于编写、阅读和维护。
<div class="language-asm highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nl">main:</span><span class="w">         </span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">eax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="no">mov</span><span class="w"> </span><span class="no">ebx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="nl">again:</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">eax</span><span class="p">,</span><span class="w"> </span><span class="no">ebx</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">ebx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="no">cmp</span><span class="w"> </span><span class="no">ebx</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="nf">jbe</span><span class="w"> </span><span class="no">again</span><span class="w">   </span>
</span></code></pre></div></li>
</ul>
<h3 id="wsprintf">wsprintf<a class="headerlink" href="#wsprintf" title="Permanent link">¶</a></h3>
<ul>
<li><code>wsprintf</code>是windows系统内部的函数，对应C标准库的<code>sprintf</code>  </li>
<li><code>sprintf</code>是C语言标准库中的一个函数，用于将<strong>格式化的数据写入字符串</strong>。它是<code>printf</code>函数的一个变体，<code>printf</code>将格式化的数据输出到标准输出（通常是<strong>屏幕</strong>），而<code>sprintf</code>则将格式化的数据输出到一个<strong>字符串</strong>中。
<div class="language-c highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kt">char</span><span class="w"> </span><span class="n">result</span><span class="p">[</span><span class="mi">100</span><span class="p">],</span><span class="w"> </span><span class="n">format</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"%d"</span><span class="p">;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">sprintf</span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="n">format</span><span class="p">,</span><span class="mi">5050</span><span class="p">);</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">sprintf</span><span class="p">(</span><span class="o">&amp;</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="o">&amp;</span><span class="n">format</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">5050</span><span class="p">);</span>
</span></code></pre></div></li>
</ul>
<div class="admonition note">
<p class="admonition-title">invoke, offset</p>
<ul>
<li><code>invoke</code>是在某些汇编语言环境中用于简化函数或过程调用的指令。它的目的是使函数调用更加直观，类似于高级语言中的函数调用。invoke指令会自动处理参数的传递和调用约定，简化了传统汇编中手动压栈和设置寄存器的过程。  </li>
<li><code>offset</code>是一个操作符，用于获取变量、标号或函数的内存地址。</li>
</ul>
</div>
<h3 id="messageboxa">MessageboxA<a class="headerlink" href="#messageboxa" title="Permanent link">¶</a></h3>
<ul>
<li><code>MessageBoxA</code>是<strong>Windows API</strong>中的一个函数，用于显示一个模态对话框，该对话框包含一条消息和一些按钮（如“确定”和“取消”）</li>
</ul>
<p></p><div class="language-asm highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nf">invoke</span><span class="w"> </span><span class="no">MessageBoxA</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">result</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">prompt</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span></code></pre></div>
<div class="language-c highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">MessageBoxA</span><span class="p">(</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="n">HWND</span><span class="w">   </span><span class="n">hWnd</span><span class="p">,</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">  </span><span class="n">LPCSTR</span><span class="w"> </span><span class="n">lpText</span><span class="p">,</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="n">LPCSTR</span><span class="w"> </span><span class="n">lpCaption</span><span class="p">,</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">  </span><span class="n">UINT</span><span class="w">   </span><span class="n">uType</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="p">);</span>
</span></code></pre></div>
- hWnd：父窗口的句柄。如果此参数为NULL，消息框没有父窗口。<br>
- lpText：消息框中显示的文本。<br>
- lpCaption：消息框标题栏的文本。<br>
- uType：定义消息框样式的选项，比如消息框中按钮的类型（如MB_OK、MB_OKCANCEL等）和图标（如MB_ICONWARNING、MB_ICONERROR等）  <p></p>
<h3 id="data">.data<a class="headerlink" href="#data" title="Permanent link">¶</a></h3>
<ul>
<li>在汇编语言中，<code>.data</code>段是用来声明<strong>初始化</strong>的数据或变量的区域。这些数据在程序开始执行前就已经被分配和初始化了。<code>.data</code>段通常包含的是程序中将要使用的<strong>静态数据</strong>，比如字符串、整数等。这些数据在程序的整个生命周期内都是可用的，并且它们的值可以在程序执行过程中被修改。  </li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="na">.data</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nf">result</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="no">dup</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="c1">; dup:duplicate重复</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="c1">;char result[100]={0};</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="nf">format</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="err">"</span><span class="nv">%d</span><span class="err">"</span><span class="p">,</span><span class="mi">0</span><span class="c1">; db:define byte字节类型</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1">; char format[3]="%d";</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="nf">prompt</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="err">"</span><span class="no">The</span><span class="w"> </span><span class="no">result</span><span class="err">"</span><span class="p">,</span><span class="mi">0</span>
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<ul>
<li>在定义数据的时候，把变量名放在最前面，然后跟数据类型，最后接赋值内容  </li>
<li>其中注意<strong>字符串</strong>，要手动在最后加<code>\0</code>  </li>
</ul>
</div>
<hr>
<h3 id="_3">打印<a class="headerlink" href="#_3" title="Permanent link">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Example-Hello World</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">输出Hello,world!</label><label for="__tabbed_1_2">输出Hello$world</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-asm highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nf">data</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nf">hello</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="err">"</span><span class="no">Hello</span><span class="p">,</span><span class="no">world</span><span class="p">!</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">Dh</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">Ah</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="no">$</span><span class="err">'</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nf">data</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:</span><span class="no">data</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="nl">main:</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">data</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="c1">; ah = 9 用来指定要调用的子函数编号</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">hello</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span><span class="c1">; interrupt</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="nf">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
<ul>
<li><code>0Dh</code>代表回车，<code>0Ah</code>代表换行，<code>$</code>在DOS中表示字符串结尾  </li>
<li><code>int 21h</code>是在DOS操作系统及其编程环境中使用的一种<strong>中断调用</strong>，用于访问DOS提供的各种系统服务，<code>21h</code>指定了DOS中断处理程序的编号，其中有许多<strong>子函数</strong>  </li>
<li><code>ah = 9</code> 用来指定要调用的<strong>子函数</strong>编号，此处代表<em>Write String to Standard Output</em>  </li>
<li><code>ds</code>寄存器只能接受一个<strong>变量</strong>或者<strong>寄存器</strong>给它赋值，<strong>不能接受一个常数</strong>  </li>
<li><code>data</code> 代表了<code>hello</code>的<strong>段地址</strong>，其中<code>mov ax, data</code>还可以写成<code>mov ax, seg hello</code>  </li>
<li>最后末尾的<code>int 21h</code>相当于<code>exit(0)</code>，最后三条指令不能改成<code>ret</code>，否则会死机；也不能删除，否则cpu会继续执行后续代码导致死机  </li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>不能像之前程序一样调用<code>9h</code>一口气输出，因为有<code>$</code>在中间  </li>
<li>于是一个个取然后打印</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nf">data</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="nf">a</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="err">"</span><span class="no">ABC</span><span class="err">"</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nf">s</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="err">"</span><span class="no">Hello$world</span><span class="err">"</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">Dh</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">Ah</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="nf">data</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:</span><span class="no">data</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="nl">main:</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">seg</span><span class="w"> </span><span class="no">s</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="nl">next:</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">dl</span><span class="p">,</span><span class="w"> </span><span class="no">s</span><span class="p">[</span><span class="no">bx</span><span class="p">]</span><span class="c1">; 编译后会变成mov dl, ds:[3+bx]</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">                 </span><span class="c1">; 其中ds是s的段地址，3是s的偏移地址</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">    </span><span class="nf">cmp</span><span class="w"> </span><span class="no">dl</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">    </span><span class="nf">je</span><span class="w"> </span><span class="no">exit</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="w">    </span><span class="nf">jmp</span><span class="w"> </span><span class="no">next</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="nl">exit:</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">00</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span>
</span></code></pre></div>
<ul>
<li>在<code>data segment</code>中定义了一个没有用的a变量，于是得出s在段地址中的偏移地址为3（a的字节数）  </li>
<li>然后我们一个个读取字符并打印</li>
</ul>
<div class="admonition info">
<p class="admonition-title">标志寄存器</p>
<ul>
<li><strong>标志寄存器（Flag Register）</strong>是CPU中的一个特殊寄存器，用于指示处理器的状态或者指令执行的结果。它包含了多个标志位（Flag Bits），每个标志位代表了不同的状态或条件。在执行指令后，这些标志位会根据指令的执行结果被设置（置1）或清除（置0）。  <ul>
<li>零标志（ZF, Zero Flag）：如果指令执行的结果为0，则设置此标志。  </li>
<li>符号标志（SF, Sign Flag）：如果指令执行的结果为负，则设置此标志。  </li>
<li>进位标志（CF, Carry Flag）：在执行算术运算时，如果最高位产生了进位或借位，则设置此标志。  </li>
<li>溢出标志（OF, Overflow Flag）：在执行算术运算时，如果结果超出了目标数据类型的表示范围，则设置此标志。  </li>
<li>奇偶校验标志（PF, Parity Flag）：如果指令执行的结果中1的数量为偶数，则设置此标志。  </li>
</ul>
</li>
<li>标志寄存器的内容会影响程序的流程控制指令，如<strong>条件跳转指令</strong>  </li>
<li>因此，不同于<code>if</code>，在到达跳跃语句前，如果比较量发生了改变，<code>cmp</code>结果即标志寄存器仍然会<strong>随之改变</strong>  </li>
</ul>
</div>
</div>
</div>
</div>
</div>
<h2 id="lec-3">Lec 3<a class="headerlink" href="#lec-3" title="Permanent link">¶</a></h2>
<h3 id="td">td调试<a class="headerlink" href="#td" title="Permanent link">¶</a></h3>
<ul>
<li><span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-g">G</kbd></span>可以查看输入地址的对象内容；  </li>
<li><span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-o">O</kbd></span>可以返回将要执行的指令处  </li>
<li><span class="keys"><kbd class="key-alt">Alt</kbd><span>+</span><kbd class="key-f5">F5</kbd></span>可以查看程序运行结果  </li>
</ul>
<hr>
<h3 id="gets">gets<a class="headerlink" href="#gets" title="Permanent link">¶</a></h3>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nf">data</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nf">s</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="no">dup</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="nf">data</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:</span><span class="no">data</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="nl">main:</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">seg</span><span class="w"> </span><span class="no">s</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="nl">input:</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="w">    </span><span class="nf">cmp</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">Dh</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="w">    </span><span class="nf">je</span><span class="w"> </span><span class="no">input_done</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">s</span><span class="p">[</span><span class="no">bx</span><span class="p">],</span><span class="w"> </span><span class="no">al</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="w">    </span><span class="nf">jmp</span><span class="w"> </span><span class="no">input</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="nl">input_done:</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">s</span><span class="p">[</span><span class="no">bx</span><span class="p">],</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="c1">; 字符串末尾'\0'</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">dl</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">Ah</span>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="nl">output:</span>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">dl</span><span class="p">,</span><span class="w"> </span><span class="no">s</span><span class="p">[</span><span class="no">bx</span><span class="p">]</span>
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="w">    </span><span class="nf">cmp</span><span class="w"> </span><span class="no">dl</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="w">    </span><span class="nf">je</span><span class="w"> </span><span class="no">output_done</span>
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a><span class="w">    </span><span class="nf">cmp</span><span class="w"> </span><span class="no">dl</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="no">a</span><span class="err">'</span>
</span><span id="__span-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a><span class="w">    </span><span class="nf">jl</span><span class="w"> </span><span class="no">not_lower_case</span><span class="w"> </span><span class="c1">; 小于a则不是小写字母</span>
</span><span id="__span-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a><span class="w">    </span><span class="nf">cmp</span><span class="w"> </span><span class="no">dl</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="no">z</span><span class="err">'</span>
</span><span id="__span-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a><span class="w">    </span><span class="nf">jg</span><span class="w"> </span><span class="no">not_lower_case</span><span class="w"> </span>
</span><span id="__span-7-33"><a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="no">is_lower_case</span><span class="p">:</span>
</span><span id="__span-7-34"><a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="w">    </span><span class="nf">sub</span><span class="w"> </span><span class="no">dl</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="w"> </span><span class="err">'</span>
</span><span id="__span-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a><span class="nl">not_lower_case:</span>
</span><span id="__span-7-36"><a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-7-37"><a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-7-38"><a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-7-39"><a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a><span class="w">    </span><span class="nf">jmp</span><span class="w"> </span><span class="no">output</span>
</span><span id="__span-7-40"><a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a><span class="nf">output</span><span class="w"> </span><span class="no">done</span><span class="p">:</span>
</span><span id="__span-7-41"><a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-7-42"><a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-7-43"><a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-7-44"><a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a><span class="nf">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-7-45"><a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
<h2 id="lec-4">Lec 4<a class="headerlink" href="#lec-4" title="Permanent link">¶</a></h2>
<h3 id="_4">小端规则<a class="headerlink" href="#_4" title="Permanent link">¶</a></h3>
<ul>
<li>
<p>先存放低8位，后存放高8位的规则</p>
</li>
<li>
<p>x86架构和ARM架构（可以配置大端或小端）都是小端规则</p>
</li>
<li>
<p>优势  </p>
<ul>
<li>在小端系统中，数据的低位字节存储在低地址，这与<strong>字节地址</strong>对齐，有时可以简化某些类型的数据处理。例如，当处理多字节数据时，可以<strong>直接访问低位字节而无需计算偏移量。</strong></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p><code>a dw 1234h</code></p>
<ul>
<li>设a的地址是0x1000，则a的值在内存中的布局为</li>
</ul>
<table>
<thead>
<tr>
<th>地址</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td>1000</td>
<td>34h 低八位在前</td>
</tr>
<tr>
<td>1001</td>
<td>12h 高八位在后</td>
</tr>
</tbody>
</table>
</div>
<h3 id="_5">汇编器指令<a class="headerlink" href="#_5" title="Permanent link">¶</a></h3>
<ul>
<li>
<p><code>.386</code>:是一个汇编器指令，用于指定目标处理器是 80386 或更高版本的 x86 处理器。这意味着汇编代码可以使用 80386 处理器及其后续版本所支持的所有指令和特性。</p>
</li>
<li>
<p><code>use16</code>:是一个汇编器指令，用于指定代码段使用 16 位地址和操作数。这意味着在该代码段中，所有的地址和操作数默认都是 16 位的。采用<code>.386</code>后偏移地址就会变为32位，而DOS系统只支持16位</p>
</li>
</ul>
<h3 id="_6">强制类型转换<a class="headerlink" href="#_6" title="Permanent link">¶</a></h3>
<ul>
<li>
<p><code>byte/word/dword ptr</code>: 通常用于内存操作指令中，以明确指定操作数的大小，特别是在操作数大小不明确或可能存在歧义的情况下。</p>
</li>
<li>
<p>在汇编语言中，如果你将一个双字（dword，32 位）类型的值强行转换为字节（byte，8 位）类型，那么只会保留最低的 8 位，其余的高位部分会被丢弃。这种操作通常称为截断。</p>
</li>
<li>
<p>示例:假设你有一个 32 位的双字值 <code>0x12345678</code>，如果将其强行转换为 8 位的字节值，那么结果将是 <code>0x78</code>，因为 <code>0x78</code> 是 <code>0x12345678</code> 的最低 8 位。</p>
</li>
</ul>
<h3 id="_7">数组<a class="headerlink" href="#_7" title="Permanent link">¶</a></h3>
<ul>
<li>在汇编语言中，数组是一组连续的内存位置，每个位置存储一个相同类型的数据元素。数组可以存储在数据段或堆栈段中，并且可以通过基址加偏移量的方式访问数组中的元素。</li>
</ul>
<h2 id="lec-5">Lec 5<a class="headerlink" href="#lec-5" title="Permanent link">¶</a></h2>
<ul>
<li>注意汇编中的常数没有宽度，需要在前面的变量<strong>指定宽度</strong></li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nf">add</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="mi">1000</span><span class="no">h</span><span class="p">],</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="err">×</span><span class="w"> </span><span class="err">↑</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="nf">add</span><span class="w"> </span><span class="no">byte</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="mi">1000</span><span class="no">h</span><span class="p">],</span><span class="w"> </span><span class="mi">1</span>
</span></code></pre></div>
<div class="language-asm highlight"><span class="filename">打印每一位十六进制数</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nf">data</span><span class="w"> </span><span class="no">segment</span><span class="w"> </span><span class="no">use16</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="nf">abc</span><span class="w"> </span><span class="no">dw</span><span class="w"> </span><span class="mi">12345678</span><span class="no">h</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="nf">data</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span><span class="w"> </span><span class="no">use16</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:</span><span class="no">data</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="nl">main:</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="no">seg</span><span class="w"> </span><span class="no">abc</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="no">ax</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">eax</span><span class="p">,</span><span class="w"> </span><span class="no">abc</span><span class="c1">;</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="nl">again:</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">    </span><span class="nf">rol</span><span class="w"> </span><span class="no">eax</span><span class="p">,</span><span class="mi">4</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">eax</span><span class="w"> </span><span class="c1">; 把eax = 23456781h当前值存入栈顶保存，方便下次pop出使用</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">    </span><span class="nf">and</span><span class="w"> </span><span class="no">eax</span><span class="p">,</span><span class="mi">0</span><span class="no">Fh</span><span class="w"> </span><span class="c1">; 这里eax = 0000001h</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">    </span><span class="nf">cmp</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="w">    </span><span class="nf">jl</span><span class="w"> </span><span class="no">is_digit</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="nl">is_alpha:</span>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="w">    </span><span class="nf">sub</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="no">A</span><span class="err">'</span>
</span><span id="__span-9-21"><a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="w">    </span><span class="nf">jmp</span><span class="w"> </span><span class="no">finish_4bits</span>
</span><span id="__span-9-22"><a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="nl">is_digit:</span>
</span><span id="__span-9-23"><a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="mi">0</span><span class="err">'</span>
</span><span id="__span-9-24"><a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="nl">finish_4bits:</span>
</span><span id="__span-9-25"><a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="mi">2</span>
</span><span id="__span-9-26"><a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">dl</span><span class="p">,</span><span class="w"> </span><span class="no">al</span>
</span><span id="__span-9-27"><a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-9-28"><a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a><span class="w">    </span><span class="nf">pop</span><span class="w"> </span><span class="no">eax</span>
</span><span id="__span-9-29"><a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a><span class="w">    </span><span class="nf">sub</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="mi">1</span>
</span><span id="__span-9-30"><a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a><span class="w">    </span><span class="nf">cmp</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-9-31"><a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a><span class="w">    </span><span class="nf">jnz</span><span class="w"> </span><span class="no">again</span>
</span><span id="__span-9-32"><a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-9-33"><a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-9-34"><a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a><span class="nf">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-9-35"><a id="__codelineno-9-35" name="__codelineno-9-35" href="#__codelineno-9-35"></a><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
<h2 id="lec-6">Lec 6<a class="headerlink" href="#lec-6" title="Permanent link">¶</a></h2>
<h3 id="_8">地址<a class="headerlink" href="#_8" title="Permanent link">¶</a></h3>
<div class="language-asm highlight"><span class="filename">对数组元素、标号取地址（显式/隐式）</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nf">.386</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="nf">data</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="nf">a</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="nf">b</span><span class="w"> </span><span class="no">dw</span><span class="w"> </span><span class="mi">1234</span><span class="no">h</span><span class="p">,</span><span class="w"> </span><span class="mi">5678</span><span class="no">h</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="nf">data</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:</span><span class="no">data</span><span class="w"> </span><span class="c1">;编译后消失</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="nl">main:</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">data</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="nl">begin:</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="c1">; 此处并非C语言中的数组索引，而是在b地址基础上加2的偏移地址，得到ax=5678h</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">b</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">bx</span><span class="p">]</span><span class="w"> </span><span class="c1">; ax=5678h</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">si</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">main</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">begin</span><span class="w"> </span><span class="c1">; begin的偏移地址，取决于main前两句指令的机器码长度</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="nf">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
<hr>
<ul>
<li>
<p>段地址的表示：将段起始地址（<strong>以0结尾</strong>）的LSB0去除，保留前四位</p>
</li>
<li>
<p>因而易得 <span class="arithmatex">\(物理地址 = 段起始地址*10\text{h} + 偏移地址\)</span></p>
</li>
<li>
<p>段长度：从0000h~FFFFh 即<span class="arithmatex">\(10000\text{h}=64\text{K}\)</span></p>
</li>
<li>
<p>如下图中，1234段和1235段是可以<strong>有重叠的</strong></p>
</li>
</ul>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_1.png" data-desc-position="bottom"><img alt="alt text" src="../asm_1.png"></a></p>
<div class="admonition warning">
<p class="admonition-title">汇编中不能用物理地址去访问变量</p>
<ul>
<li>
<p>汇编中<strong>不能</strong>用<strong>物理地址</strong>去访问变量，只能使用<strong>逻辑地址</strong></p>
</li>
<li>
<p>也不能将<strong>常数</strong>作为段地址来使用</p>
</li>
</ul>
<div class="language-asm highlight"><span class="filename">示例</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">12398</span><span class="no">h</span><span class="p">]</span><span class="w"> </span><span class="c1">;错误的写法，直接访问物理地址</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">1234</span><span class="no">h</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0058</span><span class="no">h</span><span class="p">]</span><span class="c1">; 错误的写法，采用了常数的段地址</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1234</span><span class="no">h</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="mi">0058</span><span class="no">h</span><span class="p">]</span><span class="w"> </span><span class="c1">;正确的写法，段地址与偏移地址的组合</span>
</span></code></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">可以放在<code>[]</code>内的寄存器</p>
<ul>
<li>
<p><code>bx</code>, <code>bp</code>, <code>si</code>, <code>di</code>只有这四个寄存器可以放在<code>[]</code>内引用变量</p>
</li>
<li>
<p>他们相当于C语言中的指针变量</p>
</li>
</ul>
</div>
<hr>
<div class="language-asm highlight"><span class="filename">将2个段的内存全部清0</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="nl">main:</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="no">h</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">si</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="c1">;这是外层循环次数</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="nl">again:</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="c1">;mov cx, 0 ;巧妙地将cx设为0，因为要循环10000h次</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w">              </span><span class="c1">;但是10000h无法放在cx(16位)中</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="nl">next:</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">byte</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="no">si</span><span class="p">],</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">si</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="w">    </span><span class="nf">sub</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1">;cx=FFFFh,FFFEh,FFFDh...0001h</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="w">    </span><span class="nf">jnz</span><span class="w"> </span><span class="no">next</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="no">h</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="w">    </span><span class="nf">sub</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1">;执行到这里时，si=0000h，所以对ds进行调整</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="w">    </span><span class="nf">jnz</span><span class="w"> </span><span class="no">again</span><span class="w"> </span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="no">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
<hr>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">直接寻址</label><label for="__tabbed_2_2">间接寻址</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ul>
<li>用常数来表示变量的偏移地址</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="no">h</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="mi">30</span><span class="no">h</span><span class="p">]</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="no">byte</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="mi">30</span><span class="no">h</span><span class="p">]</span><span class="w"> </span><span class="c1">;这里相当于是char类型的指针</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<ul>
<li>用寄存器、寄存器+常数的形式来表示变量的偏移地址</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="err">[</span><span class="nf">bx</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="no">si</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="no">di</span><span class="p">]</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="err">[</span><span class="nf">bx</span><span class="err">+</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="no">bp-1</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="no">si</span><span class="err">+</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="no">di</span><span class="err">+</span><span class="mi">2</span><span class="p">]</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="err">[</span><span class="nf">bx</span><span class="err">+</span><span class="no">si</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="no">bx</span><span class="err">+</span><span class="no">di</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="no">si</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="no">di</span><span class="p">]</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="err">[</span><span class="nf">bx</span><span class="err">+</span><span class="no">si-2</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="no">bx</span><span class="err">+</span><span class="no">di-2</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="no">si</span><span class="err">+</span><span class="mi">6</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="no">di-6</span><span class="p">]</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="c1">;[bx-si] [bp-si]是错误写法</span>
</span></code></pre></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<ul>
<li>
<p><code>b</code>开头的寄存器不能相加，<code>i</code>结尾的寄存器不能相加，所以实际上一共只有4种组合</p>
</li>
<li>
<p>表示地址时，寄存器<strong>不能相减</strong></p>
</li>
</ul>
</div>
<hr>
<h3 id="_9">寄存器<a class="headerlink" href="#_9" title="Permanent link">¶</a></h3>
<ul>
<li>16位cpu中共有14个寄存器</li>
</ul>
<table>
<thead>
<tr>
<th>寄存器</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>ax,bx,cx,dx</td>
<td>通用寄存器，常用于算术和逻辑运算</td>
</tr>
<tr>
<td>bx,bp,si,di</td>
<td>用于存放偏移地址</td>
</tr>
<tr>
<td>cs, ds, es, ss</td>
<td>段寄存器（都以s结尾）用来表示段地址</td>
</tr>
<tr>
<td>sp</td>
<td><code>ss:sp</code> 指向堆栈顶端，其中sp是堆栈指针(stack pointer)</td>
</tr>
<tr>
<td>ip</td>
<td><code>cs:ip</code> 指向当前将要执行的指令，其中ip是指令指针(instruction pointer)</td>
</tr>
<tr>
<td>fl</td>
<td>标志寄存器</td>
</tr>
</tbody>
</table>
<hr>
<div class="language-asm highlight"><span class="filename">sp指针的演示</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nf">stk</span><span class="w"> </span><span class="no">segment</span><span class="w"> </span><span class="no">stack</span><span class="w"> </span><span class="c1">;定义堆栈段</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="nf">db</span><span class="w"> </span><span class="mi">100</span><span class="no">h</span><span class="w"> </span><span class="no">dup</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="c1">; 后100个byte为0</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="nf">stk</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="nl">main:</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1234</span><span class="no">h</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">5678</span><span class="no">h</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span><span class="w"> </span><span class="c1">;默认sp=0100h，push ax后,sp=00FEh</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">bx</span><span class="w"> </span><span class="c1">;sp=00FCh</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="w">    </span><span class="nf">pop</span><span class="w"> </span><span class="no">ax</span><span class="w"> </span><span class="c1">;sp+=2</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="w">    </span><span class="nf">pop</span><span class="w"> </span><span class="no">bx</span><span class="w"> </span><span class="c1">;sp+=2</span>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="nf">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
<hr>
<h2 id="lec-7">Lec 7<a class="headerlink" href="#lec-7" title="Permanent link">¶</a></h2>
<h3 id="_10">显卡相关输出<a class="headerlink" href="#_10" title="Permanent link">¶</a></h3>
<ul>
<li>
<p>计算机在启动时会实现<code>B800:0000</code>与跟显卡相应地址的映射</p>
</li>
<li>
<p>显卡有两种模式</p>
<ol>
<li>文本模式：只能输出字符</li>
<li>图形模式：可以输出点</li>
</ol>
</li>
<li>
<p>对于屏幕，我们可以看作是从(0,0)~(79,24)的坐标轴</p>
</li>
<li>
<p>然后对于上面的一点(x,y)，计算它对应的<span class="arithmatex">\(显卡偏移地址=(y\cdot 80 + x)\cdot 2\)</span></p>
</li>
<li>
<p>公式中之所以是<code>2</code>，是因为每2个byte控制一个元素，第一个byte用于控制显示的<strong>字符</strong>，第二个byte控制<strong>颜色</strong></p>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Example--文本模式</p>
<ul>
<li>下面的例子在(0,0)和(0,1)初打印了红色的A和绿色的B</li>
</ul>
<div class="language-asm highlight"><span class="filename">在屏幕上打印红色的A和绿色的B</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="nl">main:</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">B800h</span><span class="w"> </span><span class="c1">; 理解成显卡段地址</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">byte</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="err">'</span><span class="no">A</span><span class="err">'</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">byte</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="mi">74</span><span class="no">h</span><span class="w"> </span><span class="c1">; 高四位是背景，第四位是前景，此处就是白色背景红色前景</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">byte</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="err">'</span><span class="no">B</span><span class="err">'</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">byte</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="mi">72</span><span class="no">h</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="nf">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
</div>
<hr>
<div class="language-asm highlight"><span class="filename">一个看似移动的'A'字符</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="nl">main:</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">B800h</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="no">A</span><span class="err">'</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">17</span><span class="no">h</span><span class="c1">; 蓝色背景,白色前景</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">2000</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="nl">again:</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="no">di</span><span class="p">],</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="no">h</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="nl">wait_wait:</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span class="nl">wait_a_while:</span>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span class="w">   </span><span class="nf">sub</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="w">   </span><span class="nf">jnz</span><span class="w"> </span><span class="no">wait_a_while</span>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a><span class="w">   </span><span class="nf">sub</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="w">   </span><span class="nf">jnz</span><span class="w"> </span><span class="no">wait_wait</span>
</span><span id="__span-17-20"><a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a>
</span><span id="__span-17-21"><a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">word</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="no">di</span><span class="p">],</span><span class="w"> </span><span class="mi">0020</span><span class="no">h</span>
</span><span id="__span-17-22"><a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a><span class="w">   </span><span class="nf">add</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-17-23"><a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a><span class="w">   </span><span class="nf">sub</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-17-24"><a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a><span class="w">   </span><span class="nf">jnz</span><span class="w"> </span><span class="no">again</span>
</span><span id="__span-17-25"><a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-17-26"><a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a><span class="w">   </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span><span class="c1">; 相当于AL=getchar();</span>
</span><span id="__span-17-27"><a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-17-28"><a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a><span class="w">   </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-17-29"><a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a><span class="nf">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-17-30"><a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
<hr>
<h4 id="_11">图形模式编程<a class="headerlink" href="#_11" title="Permanent link">¶</a></h4>
<ul>
<li>
<p>把显卡切换到图形模式：调用int 10h中断</p>
</li>
<li>
<p>例如,要切换到分辨率320*200,颜色为256色的图形模式:</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">A000h</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w">   </span><span class="c1">; 其中AH=0表示int 10h的子功能号为0</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="no">h</span><span class="c1">; 其中AL=13h代表图形模式编号</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="nf">int</span><span class="w"> </span><span class="mi">10</span><span class="no">h</span><span class="w">     </span><span class="c1">; int 10h是与显示相关的bios中断</span>
</span></code></pre></div>
</li>
<li>
<p>图形模式中，屏幕就是(0,0)~(319,199)的坐标轴</p>
</li>
<li>
<p><strong>不同</strong>于文本模式中，每一个坐标是一个<strong>byte</strong>，此处每个坐标是一个<strong>pixel</strong></p>
</li>
<li>
<p>同理：图形模式下每个坐标(x,y)<span class="arithmatex">\(显卡偏移地址=y\cdot 320 + x\)</span></p>
</li>
</ul>
<div class="language-asm highlight"><span class="filename">一个方块</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span><span class="c1">; cs不需要赋值会自动等于code</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="nl">main:</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">   </span><span class="nf">jmp</span><span class="w"> </span><span class="no">begin</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="nf">i</span><span class="w">  </span><span class="no">dw</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="nl">begin:</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0013</span><span class="no">h</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">   </span><span class="nf">int</span><span class="w"> </span><span class="mi">10</span><span class="no">h</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">A000h</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">es</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="w">   </span><span class="c1">;(320/2, 200/2)</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mi">100-20</span><span class="p">)*</span><span class="mi">320</span><span class="err">+</span><span class="p">(</span><span class="mi">160-20</span><span class="p">)</span><span class="c1">; (160-20,100-20)</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="w">   </span><span class="c1">;mov cx, 41; rows=41</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">i</span><span class="p">,</span><span class="w"> </span><span class="mi">41</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="nl">next_row:</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="w">   </span><span class="c1">;push cx</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="w">   </span><span class="nf">push</span><span class="w"> </span><span class="no">di</span>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="c1">; color=red</span>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">41</span><span class="c1">; dots=41</span>
</span><span id="__span-19-20"><a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a><span class="nl">next_dot:</span>
</span><span id="__span-19-21"><a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">di</span><span class="p">],</span><span class="w"> </span><span class="no">al</span>
</span><span id="__span-19-22"><a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a><span class="w">   </span><span class="nf">add</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-19-23"><a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a><span class="w">   </span><span class="nf">sub</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-19-24"><a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a><span class="w">   </span><span class="nf">jnz</span><span class="w"> </span><span class="no">next_dot</span>
</span><span id="__span-19-25"><a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a><span class="w">   </span><span class="nf">pop</span><span class="w"> </span><span class="no">di</span><span class="c1">; 左上角(x,y)对应的地址</span>
</span><span id="__span-19-26"><a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a><span class="w">   </span><span class="c1">;pop cx; cx=41</span>
</span><span id="__span-19-27"><a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a><span class="w">   </span><span class="nf">add</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="mi">320</span><span class="c1">; 下一行的起点的地址</span>
</span><span id="__span-19-28"><a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a><span class="w">   </span><span class="c1">;sub cx, 1; 行数-1</span>
</span><span id="__span-19-29"><a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a><span class="w">   </span><span class="nf">sub</span><span class="w"> </span><span class="no">i</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-19-30"><a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a><span class="w">   </span><span class="nf">jnz</span><span class="w"> </span><span class="no">next_row</span>
</span><span id="__span-19-31"><a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="mi">0</span>
</span><span id="__span-19-32"><a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a><span class="w">   </span><span class="nf">int</span><span class="w"> </span><span class="mi">16</span><span class="no">h</span><span class="c1">;bios键盘输入,类似int 21h的01h功能</span>
</span><span id="__span-19-33"><a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0003</span><span class="no">h</span>
</span><span id="__span-19-34"><a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a><span class="w">   </span><span class="nf">int</span><span class="w"> </span><span class="mi">10</span><span class="no">h</span><span class="c1">; 切换到80*25文本模式</span>
</span><span id="__span-19-35"><a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-19-36"><a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a><span class="w">   </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-19-37"><a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a><span class="nf">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-19-38"><a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Example--描绘点阵汉字“我”</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nf">data</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="nf">hz</span><span class="w">  </span><span class="no">db</span><span class="w"> </span><span class="mi">04</span><span class="no">h</span><span class="p">,</span><span class="mi">80</span><span class="no">h</span><span class="p">,</span><span class="mi">0</span><span class="no">Eh</span><span class="p">,</span><span class="mi">0</span><span class="no">A0h</span><span class="p">,</span><span class="mi">78</span><span class="no">h</span><span class="p">,</span><span class="mi">90</span><span class="no">h</span><span class="p">,</span><span class="mi">08</span><span class="no">h</span><span class="p">,</span><span class="mi">90</span><span class="no">h</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">    </span><span class="nf">db</span><span class="w"> </span><span class="mi">08</span><span class="no">h</span><span class="p">,</span><span class="mi">84</span><span class="no">h</span><span class="p">,</span><span class="mi">0</span><span class="no">FFh</span><span class="p">,</span><span class="mi">0</span><span class="no">FEh</span><span class="p">,</span><span class="mi">08</span><span class="no">h</span><span class="p">,</span><span class="mi">80</span><span class="no">h</span><span class="p">,</span><span class="mi">08</span><span class="no">h</span><span class="p">,</span><span class="mi">90</span><span class="no">h</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">    </span><span class="nf">db</span><span class="w"> </span><span class="mi">0</span><span class="no">Ah</span><span class="p">,</span><span class="mi">90</span><span class="no">h</span><span class="p">,</span><span class="mi">0</span><span class="no">Ch</span><span class="p">,</span><span class="mi">60</span><span class="no">h</span><span class="p">,</span><span class="mi">18</span><span class="no">h</span><span class="p">,</span><span class="mi">40</span><span class="no">h</span><span class="p">,</span><span class="mi">68</span><span class="no">h</span><span class="p">,</span><span class="mi">0</span><span class="no">A0h</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">    </span><span class="nf">db</span><span class="w"> </span><span class="mi">09</span><span class="no">h</span><span class="p">,</span><span class="mi">20</span><span class="no">h</span><span class="p">,</span><span class="mi">0</span><span class="no">Ah</span><span class="p">,</span><span class="mi">14</span><span class="no">h</span><span class="p">,</span><span class="mi">28</span><span class="no">h</span><span class="p">,</span><span class="mi">14</span><span class="no">h</span><span class="p">,</span><span class="mi">10</span><span class="no">h</span><span class="p">,</span><span class="mi">0</span><span class="no">Ch</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="nf">data</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:</span><span class="no">data</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="nl">main:</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">data</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">A000h</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">es</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0013</span><span class="no">h</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">10</span><span class="no">h</span>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">si</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="nl">next_row:</span>
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="no">hz</span><span class="p">[</span><span class="no">si</span><span class="p">]</span>
</span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="no">hz</span><span class="p">[</span><span class="no">si</span><span class="err">+</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="c1">; AX=0480h=0000 0100 1000 0000</span>
</span><span id="__span-20-22"><a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">si</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-20-23"><a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span>
</span><span id="__span-20-24"><a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a><span class="nl">check_next_dot:</span>
</span><span id="__span-20-25"><a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a><span class="w">    </span><span class="nf">shl</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="c1">; 刚移出的位会自动进入CF(进位标志)</span>
</span><span id="__span-20-26"><a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a><span class="w">    </span><span class="nf">jnc</span><span class="w"> </span><span class="no">no_dot</span><span class="c1">; 若没有进位即CF=0则跳到no_dot</span>
</span><span id="__span-20-27"><a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a><span class="nl">is_dot:</span>
</span><span id="__span-20-28"><a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">byte</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">di</span><span class="p">],</span><span class="w"> </span><span class="mi">0</span><span class="no">Ch</span>
</span><span id="__span-20-29"><a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a><span class="nl">no_dot:</span>
</span><span id="__span-20-30"><a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-20-31"><a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a><span class="w">    </span><span class="nf">sub</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-20-32"><a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a><span class="w">    </span><span class="nf">jnz</span><span class="w"> </span><span class="no">check_next_dot</span>
</span><span id="__span-20-33"><a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a><span class="w">    </span><span class="nf">sub</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span>
</span><span id="__span-20-34"><a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="mi">320</span>
</span><span id="__span-20-35"><a id="__codelineno-20-35" name="__codelineno-20-35" href="#__codelineno-20-35"></a><span class="w">    </span><span class="nf">sub</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-20-36"><a id="__codelineno-20-36" name="__codelineno-20-36" href="#__codelineno-20-36"></a><span class="w">    </span><span class="nf">jnz</span><span class="w"> </span><span class="no">next_row</span>
</span><span id="__span-20-37"><a id="__codelineno-20-37" name="__codelineno-20-37" href="#__codelineno-20-37"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-20-38"><a id="__codelineno-20-38" name="__codelineno-20-38" href="#__codelineno-20-38"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-20-39"><a id="__codelineno-20-39" name="__codelineno-20-39" href="#__codelineno-20-39"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0003</span><span class="no">h</span>
</span><span id="__span-20-40"><a id="__codelineno-20-40" name="__codelineno-20-40" href="#__codelineno-20-40"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">10</span><span class="no">h</span>
</span><span id="__span-20-41"><a id="__codelineno-20-41" name="__codelineno-20-41" href="#__codelineno-20-41"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-20-42"><a id="__codelineno-20-42" name="__codelineno-20-42" href="#__codelineno-20-42"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-20-43"><a id="__codelineno-20-43" name="__codelineno-20-43" href="#__codelineno-20-43"></a><span class="nf">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-20-44"><a id="__codelineno-20-44" name="__codelineno-20-44" href="#__codelineno-20-44"></a><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
</div>
<hr>
<h3 id="assume">assume<a class="headerlink" href="#assume" title="Permanent link">¶</a></h3>
<ul>
<li>
<p>帮助编译器建立<strong>段寄存器与段的关联</strong>, 当源程序中引用了某个段内的变量时，编译器会在编译出来的机器码中把<strong>变量的段地址替换成关联的段寄存器</strong>。</p>
</li>
<li>
<p>程序会从<code>main</code>开始，即首条指令的地址；<code>end</code>表示源程序的结束</p>
</li>
<li>
<p>所以<code>main</code>不一定要写在代码的最前面，写在后面也可以，程序也会从它开始执行</p>
</li>
</ul>
<details class="tip">
<summary>并非一定main</summary>
<ul>
<li><code>main</code> procedure一定要需要叫<code>main</code>，只需要最后和<code>end</code>对应上名字就可以了；如</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nl">master:</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="nf">end</span><span class="w"> </span><span class="no">master</span>
</span></code></pre></div>
</details>
<div class="language-asm highlight"><span class="filename">example</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nf">data</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="nf">abc</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nf">data</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span><span class="p">,</span><span class="w"> </span><span class="no">es</span><span class="p">:</span><span class="no">data</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="c1">;同一个段与多个段寄存器有关联时:ds &gt; ss &gt; es &gt; cs</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="nl">main:</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">data</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">es</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="no">abc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="c1">; 编译后变成mov al, es:[0001]</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">   </span><span class="c1">;先替换成mov al, data:[0001]</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">   </span><span class="c1">;再替换成mov al, es:[0001]</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">   </span><span class="c1">;在替换时编译器并不检查es与data是否相等</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">   </span><span class="c1">;假定前面assume ds:data,则这句话就会替换成</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="w">   </span><span class="c1">;mov al, ds:[0001]并简化成mov al, [0001]</span>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="w">   </span><span class="c1">;因为[]中没有bp时，默认的段地址一定是ds且ds</span>
</span><span id="__span-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="w">   </span><span class="c1">;可以省略。</span>
</span><span id="__span-22-19"><a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a>
</span><span id="__span-22-20"><a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="no">abc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-22-21"><a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">abc</span><span class="p">]</span>
</span><span id="__span-22-22"><a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="no">abc</span><span class="w"> </span><span class="c1">; 上面这三句都是等价的，</span>
</span><span id="__span-22-23"><a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a><span class="w">               </span><span class="c1">; 编译器会统一处理成 mov ah, [abc]再编译</span>
</span><span id="__span-22-24"><a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-22-25"><a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a><span class="w">   </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-22-26"><a id="__codelineno-22-26" name="__codelineno-22-26" href="#__codelineno-22-26"></a><span class="nf">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-22-27"><a id="__codelineno-22-27" name="__codelineno-22-27" href="#__codelineno-22-27"></a><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
<hr>
<h3 id="_12">远近指针<a class="headerlink" href="#_12" title="Permanent link">¶</a></h3>
<div class="language-c highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="mh">0x1000</span><span class="p">;</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="kt">char</span><span class="w"> </span><span class="n">far</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">far</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="mh">0xB8000000</span><span class="p">;</span>
</span></code></pre></div>
<ul>
<li>
<p>近指针<code>char *</code>的宽度只有16位，只能保存偏移地址；配套的<strong>段地址</strong>是<code>ds</code></p>
</li>
<li>
<p>远指针<code>char far *</code>的宽度有32位，可以保存偏移地址和段地址；</p>
</li>
</ul>
<h2 id="lec-8">Lec 8<a class="headerlink" href="#lec-8" title="Permanent link">¶</a></h2>
<h3 id="_13">堆栈<a class="headerlink" href="#_13" title="Permanent link">¶</a></h3>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nf">data</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nf">abc</span><span class="w"> </span><span class="no">dw</span><span class="w"> </span><span class="mi">1234</span><span class="no">h</span><span class="p">,</span><span class="w"> </span><span class="mi">5678</span><span class="no">h</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="nf">data</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="nf">stk</span><span class="w"> </span><span class="no">segment</span><span class="w"> </span><span class="no">stack</span><span class="w">   </span><span class="c1">;堆栈段是能定义一个</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="nf">a</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="mi">200</span><span class="no">h</span><span class="w"> </span><span class="no">dup</span><span class="p">(</span><span class="err">'</span><span class="no">S</span><span class="err">'</span><span class="p">)</span><span class="w">  </span><span class="c1">;初始值是多少都不重要，push时会覆盖掉</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="nf">stk</span><span class="w"> </span><span class="no">ends</span><span class="w"> </span><span class="c1">; 程序开始时ss=stk, sp=200h</span>
</span></code></pre></div>
<ul>
<li>
<p>给定一条push指令<code>push abc[0]</code>;当CPU执行push指令时</p>
<ol>
<li>
<p>sp = sp - 2</p>
</li>
<li>
<p>word str ss:[sp] = abc[0]</p>
</li>
</ol>
</li>
<li>
<p>给定一条pop指令<code>pop abc[2]</code>;当CPU执行push指令时</p>
<ol>
<li>abc[2] = word ptr ss:[sp]</li>
<li>sp = sp + 2</li>
</ol>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<ul>
<li><code>push</code>和<code>pop</code>只能针对16位和32位的数据</li>
</ul>
</div>
<details class="tip">
<summary>Data,Code,Stack三个段的关系</summary>
<ul>
<li>
<p><code>Data</code>,<code>Code</code>,<code>Stack</code>三个段是连续排布的</p>
</li>
<li>
<p>而且他们要作为段首地址，还必须是<strong>以0结尾的基址</strong>才可以的</p>
</li>
<li>
<p>同时栈外的内容，调试器或者其他进程都会覆盖，栈内的内容是稳定的</p>
</li>
</ul>
</details>
<ul>
<li>
<p>程序开始时，dos会对一下寄存器进行初始化：</p>
<ul>
<li>
<p>ss:sp， ss=stk, sp=堆栈长度=200h</p>
</li>
<li>
<p>cs:ip， cs=code, ip=offset main</p>
</li>
<li>
<p>ds=psp</p>
</li>
<li>
<p>es=psp</p>
</li>
</ul>
</li>
</ul>
<details class="tip">
<summary>什么是PSP</summary>
<ul>
<li>
<p>PSP（Program Segment Prefix）段址是指在 DOS 操作系统中，每个程序在内存中运行时，操作系统为其分配的一个特定内存区域的起始地址。PSP 是一个 256 字节（0x100 字节）长的数据结构，位于程序的段地址开头，用于存储与程序运行相关的信息。</p>
</li>
<li>
<p>所以psp+10h = code段地址(忽略末尾0)</p>
</li>
<li>
<p>在 PSP 的偏移地址 0x80 处，存储了程序启动时的命令行参数。</p>
</li>
<li>
<p>偏移地址 <code>0x80</code>：这是一个字节，表示命令行参数的长度（不包括程序名）。</p>
</li>
<li>
<p>偏移地址 <code>0x81</code> 及后续位置：这是一个字符串，包含实际的命令行参数。字符串以回车符（0x0D）结尾。</p>
</li>
</ul>
</details>
<hr>
<details class="tip">
<summary>如果我们没有定义stack segment</summary>
<ul>
<li><code>sp=0000h</code>,<code>ss=首段段地址</code></li>
</ul>
<p>569D:0000 data ; len=10h</p>
<p>569D:0010=569E:0000 code ; len=20h</p>
<p>569D:0030=56A0:0000 后续段</p>
<p>...</p>
<p>569D:FFFE &lt;-ss:sp</p>
<p>569D:FFFF</p>
<p>...</p>
<p>9000:FFFF &lt;-最远可用的内存，一共有640K（DOS会用掉一部分）</p>
<ul>
<li>
<p>当我们第一次执行<code>push ax</code>指令后，<code>ss=569Dh</code>,<code>sp=0-2=FFFE</code></p>
</li>
<li>
<p>只要栈顶指针不来到code段（中间是一个巨大的区域），就是安全的</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">保留的内存空间</p>
<p>A000:0000 ~ A000:FFFF  &lt;- 显卡地址空间</p>
<p>B000:0000 ~ B000:7FFF</p>
<p>B800:0000 ~ B800:7FFF</p>
<p>C000:0000 ~ F000:FFFF  &lt;- ROM</p>
</div>
</details>
<hr>
<h2 id="lec-9">Lec 9<a class="headerlink" href="#lec-9" title="Permanent link">¶</a></h2>
<h3 id="fl">FL标志寄存器<a class="headerlink" href="#fl" title="Permanent link">¶</a></h3>
<ul>
<li><code>FL</code>共16位，但只用其中的9位，包括6个状态标志和3个控制标志</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: center;">15</th>
<th style="text-align: center;">14</th>
<th style="text-align: center;">13</th>
<th style="text-align: center;">12</th>
<th style="text-align: center;">11</th>
<th style="text-align: center;">10</th>
<th style="text-align: center;">9</th>
<th style="text-align: center;">8</th>
<th style="text-align: center;">7</th>
<th style="text-align: center;">6</th>
<th style="text-align: center;">5</th>
<th style="text-align: center;">4</th>
<th style="text-align: center;">3</th>
<th style="text-align: center;">2</th>
<th style="text-align: center;">1</th>
<th style="text-align: center;">0</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">OF</td>
<td style="text-align: center;">DF</td>
<td style="text-align: center;">IF</td>
<td style="text-align: center;">TF</td>
<td style="text-align: center;">SF</td>
<td style="text-align: center;">ZF</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">AF</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">PF</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">CF</td>
</tr>
</tbody>
</table>
<h4 id="cf">进位标志 CF<a class="headerlink" href="#cf" title="Permanent link">¶</a></h4>
<ul>
<li>
<p>当计算产生进位（<strong>超过了目标寄存器的位宽</strong>）（借位也是一种进位）时，会使CF置1</p>
</li>
<li>
<p>同时移位也会对<code>CF</code>产生影响，<span class="arithmatex">\(CF=移出去的最后一位数\)</span></p>
</li>
<li>
<p><code>mov</code>指令不会对<code>FL</code>中任何标志位产生影响</p>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">和CF有关的跳转指令</p>
<table>
<thead>
<tr>
<th>指令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>jc</code></td>
<td>有进位则跳</td>
</tr>
<tr>
<td><code>jnc</code></td>
<td>无进位则跳</td>
</tr>
<tr>
<td><code>adc</code></td>
<td>带进位的加法，adc ax, bx; ax=ax+bx+CF</td>
</tr>
<tr>
<td><code>clc</code></td>
<td>CF=0</td>
</tr>
<tr>
<td><code>stc</code></td>
<td>CF=1</td>
</tr>
</tbody>
</table>
</div>
<h4 id="zf">零标志 ZF<a class="headerlink" href="#zf" title="Permanent link">¶</a></h4>
<ul>
<li>
<p>和<code>CF</code>类似，只不过<code>ZF</code>是零标志器，运算结果如果是0时置1</p>
</li>
<li>
<p>所以 <code>jz</code>===<code>je</code>, <code>jnz</code>===<code>jne</code>；前两条指令都是根据<code>ZF=1</code>进行跳转，后两条都是根据<code>ZF=0</code>来进行跳转</p>
</li>
</ul>
<h4 id="sf">符号标志 SF<a class="headerlink" href="#sf" title="Permanent link">¶</a></h4>
<ul>
<li>符号标志(sign flag)<code>SF</code>，其实就是<strong>运算结果的最高位</strong>；这样子不管什么有符号数、无符号数，我们只在乎最高位</li>
</ul>
<h4 id="of">溢出标志 OF<a class="headerlink" href="#of" title="Permanent link">¶</a></h4>
<ul>
<li>
<p>溢出标志(overflow flag)<code>OF</code>，这个重在<strong>关注有符号数</strong></p>
</li>
<li>
<p>而<code>CF</code>可以理解成为无符号数的溢出</p>
</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="no">Fh</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="nf">add</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1">; ah=80h 正+正=负 OF=1,CF=0,ZF=0,SF=1</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="no">h</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="nf">add</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">FFh</span><span class="w"> </span><span class="c1">;ah=7Fh 负+负=正 OF=1</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">FFh</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="nf">add</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="c1">; OF=0,CF=1</span>
</span></code></pre></div>
<h4 id="pf">奇偶校验标志 PF<a class="headerlink" href="#pf" title="Permanent link">¶</a></h4>
<ul>
<li>奇偶标志（parity flag），<code>PF=1</code>表示有偶数个1，<code>PF=0</code>表示有奇数个1，同时<code>PF</code>只统计<strong>低八位中1的个数</strong></li>
</ul>
<h4 id="af">辅助进位标志 AF<a class="headerlink" href="#af" title="Permanent link">¶</a></h4>
<ul>
<li>辅助进位标志（Auxiliary flag），当第3位向第4位产生进位/借位时，<code>AF=1</code></li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="no">Fh</span><span class="c1">; 0001 1111</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="nf">add</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">01</span><span class="no">h</span><span class="c1">; 0010 0000</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">           </span><span class="c1">; ah=20h, AF=1</span>
</span></code></pre></div>
<ul>
<li>
<p><code>AF</code>和BCD码有很大的关联，可以辅助十六进制数转成BCD码</p>
</li>
<li>
<p><code>daa</code>这条指令就会根据<code>AF==1 or (al &amp; 0Fh)&gt;9</code>来调整</p>
</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">09</span><span class="no">h</span><span class="w">  </span><span class="c1">; AL = 09h</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="nf">add</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">07</span><span class="no">h</span><span class="w">  </span><span class="c1">; AL = 10h, AF = 1</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="nf">daa</span><span class="w">           </span><span class="c1">; 调整AL的值，使其成为有效的BCD值，AL = 16h</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0x45</span><span class="w">  </span><span class="c1">; AL = 45h</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="nf">add</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0x38</span><span class="w">  </span><span class="c1">; AL = 7Dh, AF = 0, CF = 0</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="nf">daa</span><span class="w">           </span><span class="c1">; 调整AL的值，使其成为有效的BCD值，AL = 83h, CF = 1</span>
</span></code></pre></div>
<h4 id="df">方向标志 DF<a class="headerlink" href="#df" title="Permanent link">¶</a></h4>
<ul>
<li>方向标志（Direction flag），控制字符串的操作方向</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">进行字符串操作时，方向是很重要的</p>
<ul>
<li>我们看一个strcpy的例子，假设我们要把 1000~1004的内容copy到 1002~1006，由于有重叠的部分，我们就会发现很大的问题</li>
</ul>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_2.png" data-desc-position="bottom"><img alt="alt text" src="../asm_2.png"></a></p>
<ul>
<li>在1002进行copy时，却因为之前的操作被覆盖成了 <code>A</code>，导致copy不是我们预期的结果</li>
</ul>
</div>
<div class="admonition abstract">
<p class="admonition-title">结论</p>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_3.png" data-desc-position="bottom"><img alt="alt text" src="../asm_3.png"></a></p>
</div>
<ul>
<li>
<p><code>cld</code>使<code>DF=0</code>，字符串复制按正方向</p>
</li>
<li>
<p><code>std</code>使<code>DF=1</code>，字符串复制按反方向</p>
</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="w">          </span><span class="c1">;假定ds=2000h,si=1002h,es=2000h,di=1000h,cx=5</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="nf">cld</span><span class="w">       </span><span class="c1">; DF=0 表示正方向</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="na">rep</span><span class="w"> </span><span class="nf">movsb</span><span class="w"> </span><span class="c1">; 把ds:si指向的长度为cx字节的内存块复制到目标地址es:di</span>
</span></code></pre></div>
<h4 id="if">中断标志 IF<a class="headerlink" href="#if" title="Permanent link">¶</a></h4>
<ul>
<li>
<p>中断标志（Interrupt flag），当<code>IF=1</code>时,允许中断;否则禁止中断</p>
</li>
<li>
<p><code>sti</code>指令使<code>IF=1</code>表示开/允许硬件中断</p>
</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="nl">next:</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="nf">add</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="c1">;此时若用户敲键,则CPU会在此处插入一条int 9h指令并执行它</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="c1">;int 9h的功能是读键盘编码并保存到键盘缓冲区中</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="nf">add</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="nf">cmp</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="c1">;若程序已运行了1/18秒,则cpu会在此处插入一条int 8h指令</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="nf">jbe</span><span class="w"> </span><span class="no">next</span>
</span></code></pre></div>
<details class="tip">
<summary>int 9h</summary>
<ul>
<li>int 9h的功能是读键盘编码并保存到键盘缓冲区中</li>
</ul>
</details>
<details class="tip">
<summary>int 8h</summary>
<ul>
<li>
<p>在 x86 架构的计算机中，系统时钟中断（也称为时钟滴答中断）由硬件定时器（通常是可编程间隔定时器，PIT）每隔固定时间间隔触发一次。这个时间间隔通常是 18.2 次每秒（大约每 55 毫秒一次）。</p>
</li>
<li>
<p><code>int 8h</code>的作用：更新系统时钟，每次时钟中断发生时，BIOS 会更新系统时钟计数器，以跟踪系统启动以来经过的时间。</p>
</li>
</ul>
</details>
<div class="language-asm highlight"><span class="filename">防止硬件中断</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="c1">;用cli和sti把一段代码包围起来可以达到该段代码在</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="c1">;执行过程中不会被打断的效果</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="nf">cli</span><span class="c1">; clear interrupt禁止硬件中断</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="na">...</span><span class="c1">; 重要代码</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="nf">sti</span><span class="c1">; set interrupt允许硬件中断</span>
</span></code></pre></div>
<div class="admonition abstract">
<p class="admonition-title">软件中断和硬件中断区别</p>
<ul>
<li>
<p>中断来源不同：软件中断一般是管理员所编程的某条指令，而硬件中断则来自于外部硬件设备事件触发(如键盘的int 9h；时钟的int 8h)</p>
</li>
<li>
<p>显隐式：软件中断是可以清晰在调试时看见代码的，显式的（explicit）；而硬件中断则不可见，隐式的（implicit）</p>
</li>
</ul>
</div>
<h4 id="tf">陷阱标志 TF<a class="headerlink" href="#tf" title="Permanent link">¶</a></h4>
<ul>
<li>
<p>TF(Trap Flag)陷阱标志；当TF=1时，CPU会进入<strong>单步模式</strong>（single-step mode）</p>
</li>
<li>
<p>这时候，CPU会在每执行一条指令后，自动在该条指令和下条指令之间<strong>插入</strong>一条<code>int 1h</code>指令并执行它</p>
</li>
</ul>
<details class="tip">
<summary>int 1h</summary>
<ul>
<li>
<p><code>int 1h</code> 是一个中断调用，在 x86 架构的计算机中用于处理单步调试（Single Step）和硬件断点（Hardware Breakpoint）。它是由 CPU 生成的中断，用于调试目的。</p>
</li>
<li>
<p><strong>调试器</strong>可以捕获这个中断并暂停程序执行，以便检查当前的寄存器和内存状态。通过设置<strong>中断向量表</strong>，可以<strong>自定义单步中断处理程序</strong>，以实现特定的调试逻辑。</p>
</li>
</ul>
</details>
<hr>
<div class="language-asm highlight"><span class="filename">如何设置TF=1</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="w">    </span><span class="nf">pushf</span><span class="w">   </span><span class="c1">; push FL</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">    </span><span class="nf">pop</span><span class="w"> </span><span class="no">ax</span><span class="w">  </span><span class="c1">; 我们把FL压栈然后又出栈，并赋值给AX，得到AX = FL</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">    </span><span class="c1">; 之所以不直接mov ax, fl 就是因为FL和IP比较特殊</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">    </span><span class="c1">; 他们不能直接以 “名字”的形式来访问，只能间接地用这种形式</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="w">    </span><span class="nf">or</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="no">h</span><span class="w"> </span><span class="c1">; 由于TF在FL的第8位，因此我们用这种特殊的or方式</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="w">    </span><span class="c1">; 间接地实现了让TF=1</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="w">    </span><span class="nf">popf</span><span class="c1">; pop FL, FL=ax</span>
</span></code></pre></div>
<div class="language-asm highlight"><span class="filename">设置TF=0</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="w">    </span><span class="nf">pushf</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="w">    </span><span class="nf">pop</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="w">    </span><span class="nf">and</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">FEFFh</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">    </span><span class="c1">; 或写成 and ax, not 100h</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">    </span><span class="nf">popf</span>
</span></code></pre></div>
<hr>
<ul>
<li>
<p>下面将演示如何设计我们自己的<code>int 1h</code>函数</p>
</li>
<li>
<p>我们要知道<code>int 1h</code>函数的<strong>地址</strong>是存放在哪里的：</p>
<ul>
<li>
<p><code>0:4</code>~<code>0:5</code>这两个字节里存的是<code>int 1h</code>函数的偏移地址；<code>0:6~0:7</code>这两个字节里存放的是<code>int 1h</code>函数的段地址</p>
</li>
<li>
<p>例如<code>0:4</code>-&gt;78h <code>0:5</code>-&gt;56h <code>0:6</code>-&gt;34h <code>0:7</code>-&gt;12h；那么<code>int 1h</code>函数首地址就是 1234h:5678h</p>
</li>
<li>
<p>其实这个就是中断向量表，对于<code>int n</code>函数的指针就存在<code>0:n*4</code>的位置</p>
</li>
</ul>
</li>
</ul>
<div class="language-asm highlight"><span class="filename">更改int 1h函数</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:</span><span class="no">code</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="nl">main:</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">   </span><span class="nf">jmp</span><span class="w"> </span><span class="no">begin</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="nf">old1h</span><span class="w"> </span><span class="no">dw</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="nf">prev_addr</span><span class="w"> </span><span class="no">dw</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">first</span><span class="p">,</span><span class="w"> </span><span class="no">code</span><span class="c1">;前条指令的地址</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="nl">begin:</span><span class="w"> </span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="w">   </span><span class="nf">push</span><span class="w"> </span><span class="no">cs</span>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="w">   </span><span class="nf">pop</span><span class="w"> </span><span class="no">ds</span><span class="c1">; DS=CS</span>
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a><span class="w">   </span><span class="nf">xor</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-33-11"><a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">es</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-33-12"><a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span>
</span><span id="__span-33-13"><a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a><span class="w">   </span><span class="nf">push</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="p">]</span>
</span><span id="__span-33-14"><a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a><span class="w">   </span><span class="nf">pop</span><span class="w"> </span><span class="no">old1h</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-33-15"><a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a><span class="w">   </span><span class="nf">push</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="err">+</span><span class="mi">2</span><span class="p">]</span>
</span><span id="__span-33-16"><a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a><span class="w">   </span><span class="nf">pop</span><span class="w"> </span><span class="no">old1h</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="__span-33-17"><a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">word</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="p">],</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">int1h</span>
</span><span id="__span-33-18"><a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">word</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="err">+</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="no">cs</span>
</span><span id="__span-33-19"><a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a><span class="w">   </span><span class="nf">pushf</span><span class="c1">; save old FL</span>
</span><span id="__span-33-20"><a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a><span class="w">   </span><span class="nf">pushf</span>
</span><span id="__span-33-21"><a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a><span class="w">   </span><span class="nf">pop</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-33-22"><a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a><span class="w">   </span><span class="nf">or</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="no">h</span><span class="c1">; 1 0000 0000</span>
</span><span id="__span-33-23"><a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a><span class="w">   </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-33-24"><a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a><span class="w">   </span><span class="nf">popf</span><span class="c1">; TF=1</span>
</span><span id="__span-33-25"><a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a><span class="nl">first:</span>
</span><span id="__span-33-26"><a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a><span class="w">   </span><span class="nf">nop</span><span class="c1">; 当某条指令执行前TF==1,则该条指令执行后会</span>
</span><span id="__span-33-27"><a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a><span class="w">      </span><span class="c1">; 自动执行int 01h单步中断</span>
</span><span id="__span-33-28"><a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a><span class="nl">single_step_begin:</span>
</span><span id="__span-33-29"><a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a><span class="c1">;first int 1h</span>
</span><span id="__span-33-30"><a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a><span class="w">   </span><span class="nf">xor</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-33-31"><a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-33-32"><a id="__codelineno-33-32" name="__codelineno-33-32" href="#__codelineno-33-32"></a><span class="nl">next:</span>
</span><span id="__span-33-33"><a id="__codelineno-33-33" name="__codelineno-33-33" href="#__codelineno-33-33"></a><span class="w">   </span><span class="nf">add</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">cx</span>
</span><span id="__span-33-34"><a id="__codelineno-33-34" name="__codelineno-33-34" href="#__codelineno-33-34"></a><span class="w">   </span><span class="nf">nop</span>
</span><span id="__span-33-35"><a id="__codelineno-33-35" name="__codelineno-33-35" href="#__codelineno-33-35"></a><span class="w">   </span><span class="nf">loop</span><span class="w"> </span><span class="no">next</span>
</span><span id="__span-33-36"><a id="__codelineno-33-36" name="__codelineno-33-36" href="#__codelineno-33-36"></a><span class="w">   </span><span class="nf">popf</span><span class="c1">; restore old FL, TF=0</span>
</span><span id="__span-33-37"><a id="__codelineno-33-37" name="__codelineno-33-37" href="#__codelineno-33-37"></a><span class="c1">;last int 1h</span>
</span><span id="__span-33-38"><a id="__codelineno-33-38" name="__codelineno-33-38" href="#__codelineno-33-38"></a><span class="w">   </span><span class="nf">nop</span><span class="c1">;</span>
</span><span id="__span-33-39"><a id="__codelineno-33-39" name="__codelineno-33-39" href="#__codelineno-33-39"></a><span class="nl">single_step_end:</span>
</span><span id="__span-33-40"><a id="__codelineno-33-40" name="__codelineno-33-40" href="#__codelineno-33-40"></a><span class="w">   </span><span class="nf">push</span><span class="w"> </span><span class="no">old1h</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-33-41"><a id="__codelineno-33-41" name="__codelineno-33-41" href="#__codelineno-33-41"></a><span class="w">   </span><span class="nf">pop</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="p">]</span>
</span><span id="__span-33-42"><a id="__codelineno-33-42" name="__codelineno-33-42" href="#__codelineno-33-42"></a><span class="w">   </span><span class="nf">push</span><span class="w"> </span><span class="no">old1h</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="__span-33-43"><a id="__codelineno-33-43" name="__codelineno-33-43" href="#__codelineno-33-43"></a><span class="w">   </span><span class="nf">pop</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="err">+</span><span class="mi">2</span><span class="p">]</span>
</span><span id="__span-33-44"><a id="__codelineno-33-44" name="__codelineno-33-44" href="#__codelineno-33-44"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-33-45"><a id="__codelineno-33-45" name="__codelineno-33-45" href="#__codelineno-33-45"></a><span class="w">   </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-33-46"><a id="__codelineno-33-46" name="__codelineno-33-46" href="#__codelineno-33-46"></a><span class="nl">int1h:</span>
</span><span id="__span-33-47"><a id="__codelineno-33-47" name="__codelineno-33-47" href="#__codelineno-33-47"></a><span class="w">   </span><span class="nf">push</span><span class="w"> </span><span class="no">bp</span>
</span><span id="__span-33-48"><a id="__codelineno-33-48" name="__codelineno-33-48" href="#__codelineno-33-48"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">bp</span><span class="p">,</span><span class="w"> </span><span class="no">sp</span>
</span><span id="__span-33-49"><a id="__codelineno-33-49" name="__codelineno-33-49" href="#__codelineno-33-49"></a><span class="w">   </span><span class="nf">push</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-33-50"><a id="__codelineno-33-50" name="__codelineno-33-50" href="#__codelineno-33-50"></a><span class="w">   </span><span class="nf">push</span><span class="w"> </span><span class="no">es</span>
</span><span id="__span-33-51"><a id="__codelineno-33-51" name="__codelineno-33-51" href="#__codelineno-33-51"></a><span class="w">   </span><span class="nf">les</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="no">dword</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">cs</span><span class="p">:[</span><span class="no">prev_addr</span><span class="p">]</span>
</span><span id="__span-33-52"><a id="__codelineno-33-52" name="__codelineno-33-52" href="#__codelineno-33-52"></a><span class="w">   </span><span class="nf">inc</span><span class="w"> </span><span class="no">byte</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="p">]</span><span class="c1">; 加密上一条指令</span>
</span><span id="__span-33-53"><a id="__codelineno-33-53" name="__codelineno-33-53" href="#__codelineno-33-53"></a><span class="w">   </span><span class="nf">les</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="no">dword</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="mi">2</span><span class="p">]</span>
</span><span id="__span-33-54"><a id="__codelineno-33-54" name="__codelineno-33-54" href="#__codelineno-33-54"></a><span class="w">   </span><span class="c1">;mov bx, [bp+2]</span>
</span><span id="__span-33-55"><a id="__codelineno-33-55" name="__codelineno-33-55" href="#__codelineno-33-55"></a><span class="w">   </span><span class="c1">;mov es, [bp+4]; es:bx-&gt;下条指令的首字节</span>
</span><span id="__span-33-56"><a id="__codelineno-33-56" name="__codelineno-33-56" href="#__codelineno-33-56"></a>
</span><span id="__span-33-57"><a id="__codelineno-33-57" name="__codelineno-33-57" href="#__codelineno-33-57"></a><span class="w">   </span><span class="nf">dec</span><span class="w"> </span><span class="no">byte</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="p">]</span><span class="c1">; 解密下一条指令</span>
</span><span id="__span-33-58"><a id="__codelineno-33-58" name="__codelineno-33-58" href="#__codelineno-33-58"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">prev_addr</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-33-59"><a id="__codelineno-33-59" name="__codelineno-33-59" href="#__codelineno-33-59"></a><span class="w">   </span><span class="nf">mov</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">prev_addr</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="no">es</span>
</span><span id="__span-33-60"><a id="__codelineno-33-60" name="__codelineno-33-60" href="#__codelineno-33-60"></a><span class="w">   </span><span class="nf">pop</span><span class="w"> </span><span class="no">es</span>
</span><span id="__span-33-61"><a id="__codelineno-33-61" name="__codelineno-33-61" href="#__codelineno-33-61"></a><span class="w">   </span><span class="nf">pop</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-33-62"><a id="__codelineno-33-62" name="__codelineno-33-62" href="#__codelineno-33-62"></a><span class="w">   </span><span class="nf">pop</span><span class="w"> </span><span class="no">bp</span>
</span><span id="__span-33-63"><a id="__codelineno-33-63" name="__codelineno-33-63" href="#__codelineno-33-63"></a><span class="w">   </span><span class="nf">iret</span>
</span><span id="__span-33-64"><a id="__codelineno-33-64" name="__codelineno-33-64" href="#__codelineno-33-64"></a><span class="nf">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-33-65"><a id="__codelineno-33-65" name="__codelineno-33-65" href="#__codelineno-33-65"></a><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
<h2 id="lec-10">Lec 10<a class="headerlink" href="#lec-10" title="Permanent link">¶</a></h2>
<h3 id="_14">端口<a class="headerlink" href="#_14" title="Permanent link">¶</a></h3>
<ul>
<li>
<p>CPU<span class="arithmatex">\(\leftrightarrow\)</span>端口<span class="arithmatex">\(\leftrightarrow\)</span>I/O设备</p>
</li>
<li>
<p>端口是CPU与I/O设备之间的接口，用于传输数据和控制信号。端口可以是物理端口（如串行端口、并行端口、USB端口）或逻辑端口（通过I/O指令访问的地址）。</p>
</li>
<li>
<p>端口编号就是端口地址，共65536个端口，[0000h,0FFFFh]</p>
</li>
</ul>
<hr>
<ul>
<li>对端口进行操作，要使用<code>in</code>,<code>out</code>指令</li>
</ul>
<details class="tip">
<summary>Example--对键盘操作的相应</summary>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="w">    </span><span class="c1">;---------------------------------------</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">    </span><span class="c1">;PrtSc/SysRq: E0 2A E0 37 E0 B7 E0 AA  ;</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">    </span><span class="c1">;Pause/Break: E1 1D 45 E1 9D C5        ;</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">    </span><span class="c1">;---------------------------------------</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">    </span><span class="nf">data</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">    </span><span class="nf">old_9h</span><span class="w"> </span><span class="no">dw</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="w">    </span><span class="nf">stop</span><span class="w">   </span><span class="no">db</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="w">    </span><span class="nf">key</span><span class="w">    </span><span class="no">db</span><span class="w"> </span><span class="mi">0</span><span class="c1">; key=31h</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="w">    </span><span class="nf">phead</span><span class="w">  </span><span class="no">dw</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="w">    </span><span class="nf">key_extend</span><span class="w">  </span><span class="no">db</span><span class="w"> </span><span class="err">'</span><span class="no">KeyExtend</span><span class="err">='</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="w">    </span><span class="nf">key_up</span><span class="w">      </span><span class="no">db</span><span class="w"> </span><span class="err">'</span><span class="no">KeyUp</span><span class="err">='</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="w">    </span><span class="nf">key_down</span><span class="w">    </span><span class="no">db</span><span class="w"> </span><span class="err">'</span><span class="no">KeyDown</span><span class="err">='</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="w">    </span><span class="nf">key_code</span><span class="w">    </span><span class="no">db</span><span class="w"> </span><span class="err">'</span><span class="mi">00</span><span class="no">h</span><span class="w"> </span><span class="err">'</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="w">    </span><span class="nf">hex_tbl</span><span class="w">     </span><span class="no">db</span><span class="w"> </span><span class="err">'</span><span class="mi">0123456789</span><span class="no">ABCDEF</span><span class="err">'</span>
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="w">    </span><span class="nf">cr</span><span class="w">          </span><span class="no">db</span><span class="w">  </span><span class="mi">0</span><span class="no">Dh</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">Ah</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a><span class="w">    </span><span class="nf">data</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a>
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a><span class="w">    </span><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a><span class="w">    </span><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:</span><span class="no">data</span>
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a><span class="w">    </span><span class="nl">main:</span>
</span><span id="__span-34-21"><a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">data</span>
</span><span id="__span-34-22"><a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-34-23"><a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a><span class="w">        </span><span class="nf">xor</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-34-24"><a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">es</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-34-25"><a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">*</span><span class="mi">4</span>
</span><span id="__span-34-26"><a id="__codelineno-34-26" name="__codelineno-34-26" href="#__codelineno-34-26"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="p">]</span>
</span><span id="__span-34-27"><a id="__codelineno-34-27" name="__codelineno-34-27" href="#__codelineno-34-27"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">old_9h</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-34-28"><a id="__codelineno-34-28" name="__codelineno-34-28" href="#__codelineno-34-28"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="err">+</span><span class="mi">2</span><span class="p">]</span>
</span><span id="__span-34-29"><a id="__codelineno-34-29" name="__codelineno-34-29" href="#__codelineno-34-29"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">old_9h</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w">    </span><span class="c1">; 保存int 9h的中断向量</span>
</span><span id="__span-34-30"><a id="__codelineno-34-30" name="__codelineno-34-30" href="#__codelineno-34-30"></a><span class="w">        </span><span class="nf">cli</span>
</span><span id="__span-34-31"><a id="__codelineno-34-31" name="__codelineno-34-31" href="#__codelineno-34-31"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">word</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="p">],</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">int_9h</span>
</span><span id="__span-34-32"><a id="__codelineno-34-32" name="__codelineno-34-32" href="#__codelineno-34-32"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="err">+</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="no">cs</span><span class="c1">; 修改int 9h的中断向量</span>
</span><span id="__span-34-33"><a id="__codelineno-34-33" name="__codelineno-34-33" href="#__codelineno-34-33"></a><span class="w">        </span><span class="nf">sti</span>
</span><span id="__span-34-34"><a id="__codelineno-34-34" name="__codelineno-34-34" href="#__codelineno-34-34"></a><span class="w">    </span><span class="nl">again:</span>
</span><span id="__span-34-35"><a id="__codelineno-34-35" name="__codelineno-34-35" href="#__codelineno-34-35"></a><span class="w">        </span><span class="nf">cmp</span><span class="w"> </span><span class="p">[</span><span class="no">stop</span><span class="p">],</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-34-36"><a id="__codelineno-34-36" name="__codelineno-34-36" href="#__codelineno-34-36"></a><span class="w">        </span><span class="nf">jne</span><span class="w"> </span><span class="no">again</span><span class="w">        </span><span class="c1">; 主程序在此循环等待</span>
</span><span id="__span-34-37"><a id="__codelineno-34-37" name="__codelineno-34-37" href="#__codelineno-34-37"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">old_9h</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-34-38"><a id="__codelineno-34-38" name="__codelineno-34-38" href="#__codelineno-34-38"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="p">]</span>
</span><span id="__span-34-39"><a id="__codelineno-34-39" name="__codelineno-34-39" href="#__codelineno-34-39"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">old_9h</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span><span id="__span-34-40"><a id="__codelineno-34-40" name="__codelineno-34-40" href="#__codelineno-34-40"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="no">bx</span><span class="err">+</span><span class="mi">2</span><span class="p">]</span><span class="w">    </span><span class="c1">; 恢复int 9h的中断向量</span>
</span><span id="__span-34-41"><a id="__codelineno-34-41" name="__codelineno-34-41" href="#__codelineno-34-41"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-34-42"><a id="__codelineno-34-42" name="__codelineno-34-42" href="#__codelineno-34-42"></a><span class="w">        </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-34-43"><a id="__codelineno-34-43" name="__codelineno-34-43" href="#__codelineno-34-43"></a>
</span><span id="__span-34-44"><a id="__codelineno-34-44" name="__codelineno-34-44" href="#__codelineno-34-44"></a><span class="w">    </span><span class="nl">int_9h:</span>
</span><span id="__span-34-45"><a id="__codelineno-34-45" name="__codelineno-34-45" href="#__codelineno-34-45"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-34-46"><a id="__codelineno-34-46" name="__codelineno-34-46" href="#__codelineno-34-46"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-34-47"><a id="__codelineno-34-47" name="__codelineno-34-47" href="#__codelineno-34-47"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">cx</span>
</span><span id="__span-34-48"><a id="__codelineno-34-48" name="__codelineno-34-48" href="#__codelineno-34-48"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">ds</span>
</span><span id="__span-34-49"><a id="__codelineno-34-49" name="__codelineno-34-49" href="#__codelineno-34-49"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">data</span>
</span><span id="__span-34-50"><a id="__codelineno-34-50" name="__codelineno-34-50" href="#__codelineno-34-50"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span><span class="w">       </span><span class="c1">; 这里设置DS是因为被中断的不一定是我们自己的程序</span>
</span><span id="__span-34-51"><a id="__codelineno-34-51" name="__codelineno-34-51" href="#__codelineno-34-51"></a><span class="w">        </span><span class="nf">in</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="no">h</span><span class="w">       </span><span class="c1">; AL=key code</span>
</span><span id="__span-34-52"><a id="__codelineno-34-52" name="__codelineno-34-52" href="#__codelineno-34-52"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="p">[</span><span class="no">key</span><span class="p">],</span><span class="w"> </span><span class="no">al</span>
</span><span id="__span-34-53"><a id="__codelineno-34-53" name="__codelineno-34-53" href="#__codelineno-34-53"></a><span class="w">        </span><span class="nf">cmp</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">E0h</span>
</span><span id="__span-34-54"><a id="__codelineno-34-54" name="__codelineno-34-54" href="#__codelineno-34-54"></a><span class="w">        </span><span class="nf">je</span><span class="w">  </span><span class="no">extend</span>
</span><span id="__span-34-55"><a id="__codelineno-34-55" name="__codelineno-34-55" href="#__codelineno-34-55"></a><span class="w">        </span><span class="nf">cmp</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">E1h</span>
</span><span id="__span-34-56"><a id="__codelineno-34-56" name="__codelineno-34-56" href="#__codelineno-34-56"></a><span class="w">        </span><span class="nf">jne</span><span class="w"> </span><span class="no">up_or_down</span>
</span><span id="__span-34-57"><a id="__codelineno-34-57" name="__codelineno-34-57" href="#__codelineno-34-57"></a><span class="w">    </span><span class="nl">extend:</span>
</span><span id="__span-34-58"><a id="__codelineno-34-58" name="__codelineno-34-58" href="#__codelineno-34-58"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="p">[</span><span class="no">phead</span><span class="p">],</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">key_extend</span>
</span><span id="__span-34-59"><a id="__codelineno-34-59" name="__codelineno-34-59" href="#__codelineno-34-59"></a><span class="w">        </span><span class="nf">call</span><span class="w"> </span><span class="no">output</span>
</span><span id="__span-34-60"><a id="__codelineno-34-60" name="__codelineno-34-60" href="#__codelineno-34-60"></a><span class="w">        </span><span class="nf">jmp</span><span class="w"> </span><span class="no">check_esc</span>
</span><span id="__span-34-61"><a id="__codelineno-34-61" name="__codelineno-34-61" href="#__codelineno-34-61"></a><span class="w">    </span><span class="nl">up_or_down:</span>
</span><span id="__span-34-62"><a id="__codelineno-34-62" name="__codelineno-34-62" href="#__codelineno-34-62"></a><span class="w">        </span><span class="nf">test</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="no">h</span><span class="w">     </span><span class="c1">; 最高位==1时表示key up</span>
</span><span id="__span-34-63"><a id="__codelineno-34-63" name="__codelineno-34-63" href="#__codelineno-34-63"></a><span class="w">        </span><span class="nf">jz</span><span class="w"> </span><span class="no">down</span>
</span><span id="__span-34-64"><a id="__codelineno-34-64" name="__codelineno-34-64" href="#__codelineno-34-64"></a><span class="w">    </span><span class="nl">up:</span>
</span><span id="__span-34-65"><a id="__codelineno-34-65" name="__codelineno-34-65" href="#__codelineno-34-65"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="p">[</span><span class="no">phead</span><span class="p">],</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">key_up</span>
</span><span id="__span-34-66"><a id="__codelineno-34-66" name="__codelineno-34-66" href="#__codelineno-34-66"></a><span class="w">        </span><span class="nf">call</span><span class="w"> </span><span class="no">output</span>
</span><span id="__span-34-67"><a id="__codelineno-34-67" name="__codelineno-34-67" href="#__codelineno-34-67"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">cr</span>
</span><span id="__span-34-68"><a id="__codelineno-34-68" name="__codelineno-34-68" href="#__codelineno-34-68"></a><span class="w">        </span><span class="nf">call</span><span class="w"> </span><span class="no">display</span><span class="w">     </span><span class="c1">; 输出回车换行</span>
</span><span id="__span-34-69"><a id="__codelineno-34-69" name="__codelineno-34-69" href="#__codelineno-34-69"></a><span class="w">        </span><span class="nf">jmp</span><span class="w"> </span><span class="no">check_esc</span>
</span><span id="__span-34-70"><a id="__codelineno-34-70" name="__codelineno-34-70" href="#__codelineno-34-70"></a><span class="w">        </span><span class="nl">down:</span>
</span><span id="__span-34-71"><a id="__codelineno-34-71" name="__codelineno-34-71" href="#__codelineno-34-71"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="p">[</span><span class="no">phead</span><span class="p">],</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">key_down</span>
</span><span id="__span-34-72"><a id="__codelineno-34-72" name="__codelineno-34-72" href="#__codelineno-34-72"></a><span class="w">        </span><span class="nf">call</span><span class="w"> </span><span class="no">output</span>
</span><span id="__span-34-73"><a id="__codelineno-34-73" name="__codelineno-34-73" href="#__codelineno-34-73"></a><span class="w">        </span><span class="nl">check_esc:</span><span class="w">   </span>
</span><span id="__span-34-74"><a id="__codelineno-34-74" name="__codelineno-34-74" href="#__codelineno-34-74"></a><span class="w">        </span><span class="nf">cmp</span><span class="w"> </span><span class="p">[</span><span class="no">key</span><span class="p">],</span><span class="w"> </span><span class="mi">81</span><span class="no">h</span><span class="w">   </span><span class="c1">; Esc键的key up码</span>
</span><span id="__span-34-75"><a id="__codelineno-34-75" name="__codelineno-34-75" href="#__codelineno-34-75"></a><span class="w">        </span><span class="nf">jne</span><span class="w"> </span><span class="no">int_9h_iret</span>
</span><span id="__span-34-76"><a id="__codelineno-34-76" name="__codelineno-34-76" href="#__codelineno-34-76"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="p">[</span><span class="no">stop</span><span class="p">],</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-34-77"><a id="__codelineno-34-77" name="__codelineno-34-77" href="#__codelineno-34-77"></a><span class="w">        </span><span class="nl">int_9h_iret:</span>
</span><span id="__span-34-78"><a id="__codelineno-34-78" name="__codelineno-34-78" href="#__codelineno-34-78"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="no">h</span><span class="w">      </span><span class="c1">; 发EOI(End Of Interrupt)信号给中断控制器，</span>
</span><span id="__span-34-79"><a id="__codelineno-34-79" name="__codelineno-34-79" href="#__codelineno-34-79"></a><span class="w">        </span><span class="nf">out</span><span class="w"> </span><span class="mi">20</span><span class="no">h</span><span class="p">,</span><span class="w"> </span><span class="no">al</span><span class="w">      </span><span class="c1">; 表示我们已处理当前的硬件中断(硬件中断处理最后都要这2条指令)。</span>
</span><span id="__span-34-80"><a id="__codelineno-34-80" name="__codelineno-34-80" href="#__codelineno-34-80"></a><span class="w">                            </span><span class="c1">; 因为我们没有跳转到的old_9h，所以必须自己发EOI信号。</span>
</span><span id="__span-34-81"><a id="__codelineno-34-81" name="__codelineno-34-81" href="#__codelineno-34-81"></a><span class="w">                            </span><span class="c1">; 如果跳到old_9h的话，则old_9h里面有这2条指令，这里就不要写。</span>
</span><span id="__span-34-82"><a id="__codelineno-34-82" name="__codelineno-34-82" href="#__codelineno-34-82"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">ds</span>
</span><span id="__span-34-83"><a id="__codelineno-34-83" name="__codelineno-34-83" href="#__codelineno-34-83"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">cx</span>
</span><span id="__span-34-84"><a id="__codelineno-34-84" name="__codelineno-34-84" href="#__codelineno-34-84"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-34-85"><a id="__codelineno-34-85" name="__codelineno-34-85" href="#__codelineno-34-85"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-34-86"><a id="__codelineno-34-86" name="__codelineno-34-86" href="#__codelineno-34-86"></a><span class="w">        </span><span class="nf">iret</span><span class="w">             </span><span class="c1">; 中断返回指令。从堆栈中逐个弹出IP、CS、FL。</span>
</span><span id="__span-34-87"><a id="__codelineno-34-87" name="__codelineno-34-87" href="#__codelineno-34-87"></a>
</span><span id="__span-34-88"><a id="__codelineno-34-88" name="__codelineno-34-88" href="#__codelineno-34-88"></a><span class="w">    </span><span class="nl">output:</span>
</span><span id="__span-34-89"><a id="__codelineno-34-89" name="__codelineno-34-89" href="#__codelineno-34-89"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-34-90"><a id="__codelineno-34-90" name="__codelineno-34-90" href="#__codelineno-34-90"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-34-91"><a id="__codelineno-34-91" name="__codelineno-34-91" href="#__codelineno-34-91"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">cx</span>
</span><span id="__span-34-92"><a id="__codelineno-34-92" name="__codelineno-34-92" href="#__codelineno-34-92"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">hex_tbl</span>
</span><span id="__span-34-93"><a id="__codelineno-34-93" name="__codelineno-34-93" href="#__codelineno-34-93"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">cl</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span>
</span><span id="__span-34-94"><a id="__codelineno-34-94" name="__codelineno-34-94" href="#__codelineno-34-94"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span><span class="w">   </span><span class="c1">; 设AL=31h=0011 0001</span>
</span><span id="__span-34-95"><a id="__codelineno-34-95" name="__codelineno-34-95" href="#__codelineno-34-95"></a><span class="w">        </span><span class="nf">shr</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="no">cl</span><span class="c1">; AL=03h</span>
</span><span id="__span-34-96"><a id="__codelineno-34-96" name="__codelineno-34-96" href="#__codelineno-34-96"></a><span class="w">        </span><span class="nf">xlat</span><span class="w">      </span><span class="c1">; AL = DS:[BX+AL] = '3'</span>
</span><span id="__span-34-97"><a id="__codelineno-34-97" name="__codelineno-34-97" href="#__codelineno-34-97"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">key_code</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="no">al</span>
</span><span id="__span-34-98"><a id="__codelineno-34-98" name="__codelineno-34-98" href="#__codelineno-34-98"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-34-99"><a id="__codelineno-34-99" name="__codelineno-34-99" href="#__codelineno-34-99"></a><span class="w">        </span><span class="nf">and</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">Fh</span><span class="c1">; AL=01h</span>
</span><span id="__span-34-100"><a id="__codelineno-34-100" name="__codelineno-34-100" href="#__codelineno-34-100"></a><span class="w">        </span><span class="nf">xlat</span><span class="w">       </span><span class="c1">; AL='1'</span>
</span><span id="__span-34-101"><a id="__codelineno-34-101" name="__codelineno-34-101" href="#__codelineno-34-101"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">key_code</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="no">al</span>
</span><span id="__span-34-102"><a id="__codelineno-34-102" name="__codelineno-34-102" href="#__codelineno-34-102"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">phead</span><span class="p">]</span>
</span><span id="__span-34-103"><a id="__codelineno-34-103" name="__codelineno-34-103" href="#__codelineno-34-103"></a><span class="w">        </span><span class="nf">call</span><span class="w"> </span><span class="no">display</span><span class="w">     </span><span class="c1">; 输出提示信息</span>
</span><span id="__span-34-104"><a id="__codelineno-34-104" name="__codelineno-34-104" href="#__codelineno-34-104"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">key_code</span>
</span><span id="__span-34-105"><a id="__codelineno-34-105" name="__codelineno-34-105" href="#__codelineno-34-105"></a><span class="w">        </span><span class="nf">call</span><span class="w"> </span><span class="no">display</span><span class="w">     </span><span class="c1">; 输出键码</span>
</span><span id="__span-34-106"><a id="__codelineno-34-106" name="__codelineno-34-106" href="#__codelineno-34-106"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">cx</span>
</span><span id="__span-34-107"><a id="__codelineno-34-107" name="__codelineno-34-107" href="#__codelineno-34-107"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-34-108"><a id="__codelineno-34-108" name="__codelineno-34-108" href="#__codelineno-34-108"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-34-109"><a id="__codelineno-34-109" name="__codelineno-34-109" href="#__codelineno-34-109"></a><span class="w">        </span><span class="nf">ret</span>
</span><span id="__span-34-110"><a id="__codelineno-34-110" name="__codelineno-34-110" href="#__codelineno-34-110"></a>
</span><span id="__span-34-111"><a id="__codelineno-34-111" name="__codelineno-34-111" href="#__codelineno-34-111"></a><span class="w">    </span><span class="nl">display:</span>
</span><span id="__span-34-112"><a id="__codelineno-34-112" name="__codelineno-34-112" href="#__codelineno-34-112"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-34-113"><a id="__codelineno-34-113" name="__codelineno-34-113" href="#__codelineno-34-113"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-34-114"><a id="__codelineno-34-114" name="__codelineno-34-114" href="#__codelineno-34-114"></a><span class="w">        </span><span class="nf">push</span><span class="w"> </span><span class="no">si</span>
</span><span id="__span-34-115"><a id="__codelineno-34-115" name="__codelineno-34-115" href="#__codelineno-34-115"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">si</span><span class="p">,</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-34-116"><a id="__codelineno-34-116" name="__codelineno-34-116" href="#__codelineno-34-116"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">0007</span><span class="no">h</span><span class="w">    </span><span class="c1">; BL = color</span>
</span><span id="__span-34-117"><a id="__codelineno-34-117" name="__codelineno-34-117" href="#__codelineno-34-117"></a><span class="w">        </span><span class="nf">cld</span>
</span><span id="__span-34-118"><a id="__codelineno-34-118" name="__codelineno-34-118" href="#__codelineno-34-118"></a><span class="w">    </span><span class="nl">display_next:</span>
</span><span id="__span-34-119"><a id="__codelineno-34-119" name="__codelineno-34-119" href="#__codelineno-34-119"></a><span class="w">        </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">Eh</span><span class="w">      </span><span class="c1">; AH=0Eh, BIOS int 10h的子功能，具体请查中断大全</span>
</span><span id="__span-34-120"><a id="__codelineno-34-120" name="__codelineno-34-120" href="#__codelineno-34-120"></a><span class="w">        </span><span class="nf">lodsb</span>
</span><span id="__span-34-121"><a id="__codelineno-34-121" name="__codelineno-34-121" href="#__codelineno-34-121"></a><span class="w">        </span><span class="nf">or</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="no">al</span>
</span><span id="__span-34-122"><a id="__codelineno-34-122" name="__codelineno-34-122" href="#__codelineno-34-122"></a><span class="w">        </span><span class="nf">jz</span><span class="w"> </span><span class="no">display_done</span>
</span><span id="__span-34-123"><a id="__codelineno-34-123" name="__codelineno-34-123" href="#__codelineno-34-123"></a><span class="w">        </span><span class="nf">int</span><span class="w"> </span><span class="mi">10</span><span class="no">h</span><span class="w">          </span><span class="c1">; 每次输出一个字符</span>
</span><span id="__span-34-124"><a id="__codelineno-34-124" name="__codelineno-34-124" href="#__codelineno-34-124"></a><span class="w">        </span><span class="nf">jmp</span><span class="w"> </span><span class="no">display_next</span>
</span><span id="__span-34-125"><a id="__codelineno-34-125" name="__codelineno-34-125" href="#__codelineno-34-125"></a><span class="w">    </span><span class="nl">display_done:</span>
</span><span id="__span-34-126"><a id="__codelineno-34-126" name="__codelineno-34-126" href="#__codelineno-34-126"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">si</span>
</span><span id="__span-34-127"><a id="__codelineno-34-127" name="__codelineno-34-127" href="#__codelineno-34-127"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-34-128"><a id="__codelineno-34-128" name="__codelineno-34-128" href="#__codelineno-34-128"></a><span class="w">        </span><span class="nf">pop</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-34-129"><a id="__codelineno-34-129" name="__codelineno-34-129" href="#__codelineno-34-129"></a><span class="w">        </span><span class="nf">ret</span>
</span><span id="__span-34-130"><a id="__codelineno-34-130" name="__codelineno-34-130" href="#__codelineno-34-130"></a><span class="w">    </span><span class="nf">code</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-34-131"><a id="__codelineno-34-131" name="__codelineno-34-131" href="#__codelineno-34-131"></a><span class="w">    </span><span class="nf">end</span><span class="w"> </span><span class="no">main</span>
</span></code></pre></div>
</details>
<hr>
<ul>
<li>
<p>另外一个常用的外部设备就是cmos；CMOS（Complementary Metal-Oxide-Semiconductor）存储器用于保存系统的配置信息和实时时钟（RTC）数据。CMOS 存储器通过 I/O 端口 70h 和 71h 进行访问。</p>
</li>
<li>
<p>CMOS中地址<code>[4],[2],[0]</code>分别保存了时钟中的时、分、秒，格式为BCD码</p>
</li>
<li>
<p>如果我们想要访问，就要借助两个端口：</p>
<ul>
<li>
<p>端口 <code>70h</code> 是 CMOS 地址寄存器。通过向这个端口写入一个值，可以选择 CMOS 存储器中的一个特定地址。</p>
</li>
<li>
<p>端口 <code>71h</code> 是 CMOS 数据寄存器。通过从这个端口读写数据，可以访问 CMOS 存储器中由端口 70h 选择的地址。</p>
</li>
</ul>
</li>
</ul>
<h3 id="_15">再谈寻址方式<a class="headerlink" href="#_15" title="Permanent link">¶</a></h3>
<ul>
<li>
<p>段地址的隐含：</p>
<ul>
<li>
<p>当<code>[]</code>内的寄存器为非<code>bp</code>的时候，默认的段地址就是<code>ds</code></p>
</li>
<li>
<p>当<code>[]</code>内的寄存器为<code>bp</code>的时候，默认的段地址是<code>ss</code></p>
</li>
<li>
<p>这是因为<code>sp</code>这个寄存器<strong>不能</strong>用在<code>[]</code>中，而我们如果想要访问<strong>堆栈</strong>，就需要借助于<code>bp</code></p>
</li>
</ul>
</li>
</ul>
<h3 id="_16">寄存器交换指令<a class="headerlink" href="#_16" title="Permanent link">¶</a></h3>
<ul>
<li><code>xchg</code>(exchange)指令用于交换两个寄存器的值；或者一个是寄存器、另一个是变量</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="nf">xchg</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="nf">xchg</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="no">bx</span><span class="p">]</span>
</span></code></pre></div>
<h3 id="_17">乘除法<a class="headerlink" href="#_17" title="Permanent link">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title"><code>mul</code>和<code>div</code>指令都是无符号数的乘除法操作，<code>imul</code>,<code>idiv</code>用于有符号数的乘除法</p>
</div>
<h4 id="mul">mul<a class="headerlink" href="#mul" title="Permanent link">¶</a></h4>
<ul>
<li>乘法指令<code>mul</code>比较特殊，分为8位乘法、16位乘法、32位乘法</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio"><input id="__tabbed_3_2" name="__tabbed_3" type="radio"><input id="__tabbed_3_3" name="__tabbed_3" type="radio"><div class="tabbed-labels"><label for="__tabbed_3_1">8位乘法</label><label for="__tabbed_3_2">16位乘法</label><label for="__tabbed_3_3">32位乘法</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ul>
<li>
<p>后面只有<strong>一个</strong>操作数，必须是一个<strong>8位寄存器</strong>或者<strong>8位变量</strong></p>
</li>
<li>
<p>其中，被乘数一定是<code>al</code>，结果保存在<code>ax</code>中</p>
</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="no">h</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bh</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="no">h</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="nf">mul</span><span class="w"> </span><span class="no">bh</span><span class="w"> </span><span class="c1">; ax = bh*al</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<ul>
<li>被乘数一定是<code>ax</code>，结果一定保存在<code>dx:ax</code>中（这里的冒号并非寻址，而是表示寄存器的连接，高低部分分别保存在两个寄存器里面）</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1234</span><span class="no">h</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bh</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="no">h</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="nf">mul</span><span class="w"> </span><span class="no">bh</span><span class="w"> </span><span class="c1">; 结果是 0012 3400h</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="c1">; 其中dx=0012h, ax=3400h</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<ul>
<li>被乘数一定是<code>eax</code>，结果一定保存在<code>edx:eax</code>中（高低部分分别保存在两个寄存器里面）</li>
</ul>
</div>
</div>
</div>
<hr>
<h4 id="div">div<a class="headerlink" href="#div" title="Permanent link">¶</a></h4>
<ul>
<li>和乘法类似，div同样也只有一个操作数；同时作为被除数和保存结果的寄存器与乘法可以说是"倒置"关系</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio"><input id="__tabbed_4_2" name="__tabbed_4" type="radio"><input id="__tabbed_4_3" name="__tabbed_4" type="radio"><div class="tabbed-labels"><label for="__tabbed_4_1">16位除法</label><label for="__tabbed_4_2">32位除法</label><label for="__tabbed_4_3">64位除法</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ul>
<li>被除数一定是<code>ax</code>，其中商保存在<code>al</code>，余数保存在<code>ah</code></li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="no">h</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bh</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="no">h</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="nf">div</span><span class="w"> </span><span class="no">bh</span><span class="w"> </span><span class="c1">; al=12h, ah=3h</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<ul>
<li>被除数一定是<code>dx:ax</code>，其中商保存在<code>ax</code>，余数保存在<code>dx</code></li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>被除数一定是<code>edx:eax</code>，其中商保存在<code>eax</code>，余数保存在<code>edx</code></li>
</ul>
</div>
</div>
</div>
<hr>
<h4 id="_18">除法溢出<a class="headerlink" href="#_18" title="Permanent link">¶</a></h4>
<div class="admonition abstract">
<p class="admonition-title">除法溢出的两种情形</p>
<p>1.除以0</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1234</span><span class="no">h</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bh</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="nf">div</span><span class="w"> </span><span class="no">bh</span><span class="c1">; 除以0显然发生溢出</span>
</span></code></pre></div>
<p>2.商无法保存在<code>AL</code>中（寄存器太小）</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="no">h</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bh</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="nf">div</span><span class="w"> </span><span class="no">bh</span><span class="w"> </span><span class="c1">; 此时由于商无法保存到AL中，因此也会发生溢出</span>
</span></code></pre></div>
</div>
<h2 id="lec-11">Lec 11<a class="headerlink" href="#lec-11" title="Permanent link">¶</a></h2>
<h3 id="_19">地址传送指令<a class="headerlink" href="#_19" title="Permanent link">¶</a></h3>
<p><code>LEA</code>,<code>LDS</code>,<code>LES</code></p>
<h4 id="lea">lea<a class="headerlink" href="#lea" title="Permanent link">¶</a></h4>
<ul>
<li>
<p><code>lea</code>(load effective address):就是取变量的偏移地址</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="nf">lea</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="mi">1000</span><span class="no">h</span><span class="p">]</span><span class="w"> </span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="c1">;上面这一句等效于mov dx, 1000h</span>
</span></code></pre></div>
</li>
<li>
<p>这里看似<code>lea</code>指令没有意义，直接mov就好了；但是只是常数的情况是这样的，其实<code>lea</code>有不可取代的地方</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="nf">lea</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="no">bx</span><span class="err">+</span><span class="no">si</span><span class="err">+</span><span class="mi">3</span><span class="p">]</span><span class="c1">; dx=bx+si+3</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="c1">;而mov dx, bx+si+3是错误的，一条指令做不到</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="nf">add</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">si</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="nf">add</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="mi">3</span>
</span></code></pre></div>
<div class="language-asm highlight"><span class="filename">巧做运算</span><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="nf">lea</span><span class="w"> </span><span class="no">eax</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">eax</span><span class="err">+</span><span class="no">eax</span><span class="p">*</span><span class="mi">4</span><span class="p">]</span><span class="c1">; EAX=EAX*5</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="c1">;看似在取址，实际在乘法运算</span>
</span></code></pre></div>
</li>
</ul>
<hr>
<h4 id="_20">引：远近指针<a class="headerlink" href="#_20" title="Permanent link">¶</a></h4>
<ul>
<li>
<p>远指针(far pointer)指的是段地址和偏移地址的组合，而近指针(near pointer)就是偏移地址；</p>
</li>
<li>
<p>16位汇编中，远指针是16位段地址:16位偏移地址，近指针是16位偏移地址；32位汇编中，远指针是16位段地址:32位偏移地址，近指针是32位偏移地址</p>
</li>
<li>
<p>当我们的程序中，<strong>段地址</strong>总是需要变化的时候，就可以使用远指针</p>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">远指针的内存布局</p>
<ul>
<li>
<p>假定一个远指针<span class="arithmatex">\(p\)</span> <code>1234h:5678h</code>存放在地址<code>1000:0000h</code>中；</p>
</li>
<li>
<p>在内存数据中肯定没有冒号，把段地址和偏移地址拼在一起，变成一个32位数-&gt;<code>12345678h</code></p>
</li>
<li>
<p>则内存布局如下：</p>
<ul>
<li>
<p>1000:0000 78h</p>
</li>
<li>
<p>1000:0001 56h</p>
</li>
<li>
<p>1000:0002 34h</p>
</li>
<li>
<p>1000:0003 12h</p>
</li>
</ul>
</li>
<li>
<p>顺带一提，这个dword大小的值，究竟是远指针还是<code>long int</code>，我们光从内存布局是看不出来的</p>
</li>
</ul>
</div>
<ul>
<li>如果我们尝试从内存中读取远指针的值，可以发现用mov操作需要两次，例如：</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="c1">;设ds=1000h, bx=0</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="no">bx</span><span class="p">]</span><span class="w">   </span><span class="c1">;di=5678h</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="nf">mov</span><span class="w"> </span><span class="no">es</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="no">bx</span><span class="err">+</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="c1">;es=1234h</span>
</span></code></pre></div>
<ul>
<li>于是就引入了<code>les</code>和<code>lds</code>指令</li>
</ul>
<hr>
<h4 id="les-lds">les, lds<a class="headerlink" href="#les-lds" title="Permanent link">¶</a></h4>
<ul>
<li>
<p><code>LES</code>（Load Pointer Using ES）指令用于将内存中的数据加载到指定的通用寄存器和 <code>ES</code>（附加段寄存器）中。</p>
<ul>
<li>例如，<code>les bx, [ptr]</code> 将内存地址 ptr （16 位偏移地址和 16 位段地址）加载到 <code>BX</code> 和 <code>ES</code> 中。</li>
</ul>
</li>
<li>
<p><code>LDS</code>（Load Pointer Using DS）指令用于将内存中的数据加载到指定的通用寄存器和<code>DS</code>中</p>
<ul>
<li>例如，<code>lds bx, [ptr]</code> 将内存地址 ptr （16 位偏移地址和 16 位段地址）加载到 <code>BX</code> 和 <code>DS</code> 中。</li>
</ul>
</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="nf">les</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="no">bx</span><span class="p">]</span><span class="c1">; 高16位分配给es，低16位分配给di</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="nf">lds</span><span class="w"> </span><span class="no">si</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:[</span><span class="no">bx</span><span class="p">]</span><span class="c1">; 高16位分配给ds，低16位分配给si</span>
</span></code></pre></div>
<hr>
<div class="language-asm highlight"><span class="filename">Example--远指针的定义和使用</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="nf">data</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="nf">video_addr</span><span class="w"> </span><span class="no">dw</span><span class="w"> </span><span class="mi">0000</span><span class="no">h</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">B800h</span><span class="p">,</span><span class="w"> </span><span class="mi">160</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">B800h</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="c1">;上述定义也可以写成</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="c1">;video_addr dw 0B8000000h, 0B80000A0h</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="c1">;video_addr db 00, 00, 00, 0B8, A0, 00, 00, B8</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="c1">;然后当使用dw定义的时候，需要进行强制类型转换，才能使用les</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="nf">les</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="no">dword</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">video_addr</span><span class="p">[</span><span class="no">bx</span><span class="p">]</span>
</span></code></pre></div>
<div class="language-c highlight"><span class="filename">C语言例子</span><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(){</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">far</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">far</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="mh">0xB8000000</span><span class="p">;</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="w">    </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">'A'</span><span class="p">;</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="w">    </span><span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x17</span><span class="p">;</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="_21">符号扩充指令<a class="headerlink" href="#_21" title="Permanent link">¶</a></h3>
<ul>
<li>
<p>在 x86 汇编语言中，<code>CBW</code>、<code>CWD</code> 和 <code>CDQ</code> 是三条用于扩展符号位的指令。它们用于将较小的有符号数扩展为较大的有符号数，以便进行后续的算术运算。</p>
</li>
<li>
<p><code>CBW</code>(convert byte to word)指令用于将 <code>AL</code> 寄存器中的有符号字节扩展为 <code>AX</code> 寄存器中的有符号字。</p>
</li>
<li>
<p><code>CWD</code>(convert word to doubleword) 指令用于将 AX 寄存器中的有符号字扩展为 DX:AX 寄存器对中的有符号双字。</p>
</li>
<li>
<p><code>CDQ</code>(convert doubleword to quadword) 指令用于将 EAX 寄存器中的有符号双字扩展为 EDX:EAX 寄存器对中的有符号四字。</p>
</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">FEh</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="nf">cbw</span><span class="c1">; AX=0FFFEh</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">8000</span><span class="no">h</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="nf">cwd</span><span class="c1">; DX=0FFFFh AX=8000h</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="nf">mov</span><span class="w"> </span><span class="no">eax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">ABCD1234h</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a><span class="nf">cdq</span><span class="c1">; EDX=0FFFFFFFFh EAX=0ABCD1234h</span>
</span></code></pre></div>
<hr>
<ul>
<li>不过intel后面出了一个新指令<code>movsx</code>，完全可以淘汰上述的三个指令；因为上面三个指令的src和dest寄存器是限定死的；但是<code>movsx dest, src</code>可以很随意，只需要dest是<strong>较大</strong>的寄存器，src是<strong>较小</strong>的寄存器</li>
</ul>
<h3 id="_22">零扩充指令<a class="headerlink" href="#_22" title="Permanent link">¶</a></h3>
<ul>
<li><code>MOVZX</code>（Move with Zero-Extend）是 x86 汇编语言中的一条指令，用于将一个<strong>较小</strong>的源操作数（如 8 位或 16 位）移动到一个<strong>较大</strong>的目标寄存器（如 16 位或 32 位），并将<strong>高位用零填充</strong>。</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="nf">movzx</span><span class="w"> </span><span class="no">eax</span><span class="p">,</span><span class="w"> </span><span class="no">al</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="nf">movzx</span><span class="w"> </span><span class="no">edx</span><span class="p">,</span><span class="w"> </span><span class="no">al</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="c1">;左边的源可以是任意的较大目标寄存器</span>
</span></code></pre></div>
<h3 id="_23">换码指令（查表指令）<a class="headerlink" href="#_23" title="Permanent link">¶</a></h3>
<ul>
<li>
<p><code>XLAT</code>（Translate）是 x86 汇编语言中的一条指令，用于根据<strong>查找表</strong>（通常是一个数组）将一个字节值转换为另一个字节值。<code>XLAT</code> 指令使用 <code>AL</code> 寄存器中的值作为索引，从查找表中获取相应的字节值，并将其存储在 <code>AL</code> 寄存器中。</p>
</li>
<li>
<p><code>xlat</code>在执行前，必须让<code>ds:bx</code><strong>指向查找表</strong>，<code>al</code>赋值为数组的<strong>下标</strong>；执行<code>xlat</code>后，AL=ds:[bx+AL]</p>
</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="nf">char</span><span class="w"> </span><span class="no">t</span><span class="p">[]</span><span class="err">="</span><span class="mi">0123456789</span><span class="no">ABCDEF</span><span class="err">"</span><span class="c1">;</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="nf">char</span><span class="w"> </span><span class="no">i</span><span class="c1">;</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="nf">i</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="mi">10</span><span class="c1">;</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="nf">i</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="no">t</span><span class="p">[</span><span class="no">i</span><span class="p">]</span><span class="c1">; 最后i='A'</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="err">设</span><span class="nf">ds</span><span class="err">=数组</span><span class="no">t的段地址</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">t</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="nf">xlat</span><span class="c1">; AL='A'</span>
</span></code></pre></div>
<h3 id="_24">加法指令<a class="headerlink" href="#_24" title="Permanent link">¶</a></h3>
<p><code>ADD</code>,<code>INC</code>,<code>ADC</code></p>
<ul>
<li>
<p><code>INC</code> 指令用于将操作数递增 1；同时<code>inc</code>指令不会影响<code>CF</code>标志位</p>
</li>
<li>
<p><code>ADC</code>（Add with Carry）指令用于将两个操作数相加，并加上进位标志（Carry Flag，CF）的值。它通常用于多字节或多字的加法运算。</p>
</li>
</ul>
<div class="language-asm highlight"><span class="filename">Example--计算12345678h + 5678FFFFh</span><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">1234</span><span class="no">h</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">5678</span><span class="no">h</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="nf">add</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">FFFFh</span><span class="w"> </span><span class="c1">;CF=1</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="nf">adc</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">5678</span><span class="no">h</span><span class="w"> </span><span class="c1">;DX=DX+5678h+CF</span>
</span></code></pre></div>
<div class="language-asm highlight"><span class="filename">高精度加法</span><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="nf">x</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="no">dup</span><span class="p">(</span><span class="mi">88</span><span class="no">h</span><span class="p">)</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="nf">y</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="no">dup</span><span class="p">(</span><span class="mi">99</span><span class="no">h</span><span class="p">)</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="nf">z</span><span class="w"> </span><span class="no">db</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class="no">dup</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="nl">main:</span>
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span>
</span><span id="__span-52-7"><a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">si</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">x</span>
</span><span id="__span-52-8"><a id="__codelineno-52-8" name="__codelineno-52-8" href="#__codelineno-52-8"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">di</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">y</span>
</span><span id="__span-52-9"><a id="__codelineno-52-9" name="__codelineno-52-9" href="#__codelineno-52-9"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">z</span>
</span><span id="__span-52-10"><a id="__codelineno-52-10" name="__codelineno-52-10" href="#__codelineno-52-10"></a><span class="w">    </span><span class="nf">clc</span>
</span><span id="__span-52-11"><a id="__codelineno-52-11" name="__codelineno-52-11" href="#__codelineno-52-11"></a><span class="nl">next:</span>
</span><span id="__span-52-12"><a id="__codelineno-52-12" name="__codelineno-52-12" href="#__codelineno-52-12"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">si</span><span class="p">]</span>
</span><span id="__span-52-13"><a id="__codelineno-52-13" name="__codelineno-52-13" href="#__codelineno-52-13"></a><span class="w">    </span><span class="nf">adc</span><span class="w"> </span><span class="no">al</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">di</span><span class="p">]</span>
</span><span id="__span-52-14"><a id="__codelineno-52-14" name="__codelineno-52-14" href="#__codelineno-52-14"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="p">[</span><span class="no">bx</span><span class="p">],</span><span class="w"> </span><span class="no">al</span>
</span><span id="__span-52-15"><a id="__codelineno-52-15" name="__codelineno-52-15" href="#__codelineno-52-15"></a><span class="w">    </span><span class="nf">inc</span><span class="w"> </span><span class="no">si</span>
</span><span id="__span-52-16"><a id="__codelineno-52-16" name="__codelineno-52-16" href="#__codelineno-52-16"></a><span class="w">    </span><span class="nf">inc</span><span class="w"> </span><span class="no">di</span>
</span><span id="__span-52-17"><a id="__codelineno-52-17" name="__codelineno-52-17" href="#__codelineno-52-17"></a><span class="w">    </span><span class="nf">inc</span><span class="w"> </span><span class="no">bx</span>
</span><span id="__span-52-18"><a id="__codelineno-52-18" name="__codelineno-52-18" href="#__codelineno-52-18"></a><span class="w">    </span><span class="nf">dec</span><span class="w"> </span><span class="no">cx</span>
</span><span id="__span-52-19"><a id="__codelineno-52-19" name="__codelineno-52-19" href="#__codelineno-52-19"></a><span class="w">    </span><span class="nf">jnz</span><span class="w"> </span><span class="no">next</span>
</span><span id="__span-52-20"><a id="__codelineno-52-20" name="__codelineno-52-20" href="#__codelineno-52-20"></a><span class="w">    </span><span class="nf">adc</span><span class="w"> </span><span class="no">z</span><span class="p">[</span><span class="mi">100</span><span class="p">],</span><span class="w"> </span><span class="mi">0</span>
</span></code></pre></div>
<h3 id="_25">减法指令<a class="headerlink" href="#_25" title="Permanent link">¶</a></h3>
<p><code>SUB</code>,<code>DEC</code>,<code>NEG</code>,<code>SBB</code>,<code>CMP</code></p>
<ul>
<li>
<p><code>DEC</code> 指令用于将操作数递减 1；同时<code>dec</code>指令不会影响<code>CF</code></p>
</li>
<li>
<p><code>NEG</code> 指令用于将操作数<strong>求补</strong>，就是求相反数，会影响<code>CF</code>,<code>ZF</code>,<code>SF</code>；</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="nf">neg</span><span class="w"> </span><span class="no">ax</span><span class="c1">; AX=-1=0FFFFh</span>
</span></code></pre></div>
</li>
<li>
<p><code>SBB</code>（Subtract with Borrow）指令用于将源操作数和进位标志（<code>CF</code>）从目标操作数中减去，并将结果存储在目标操作数中。它通常用于多字节或多字的减法运算。</p>
<div class="language-asm highlight"><span class="filename">56781234h-1111FFFFh</span><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1234</span><span class="no">h</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="nf">sub</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">FFFFh</span><span class="c1">; CF=1</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">5678</span><span class="no">h</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="nf">sbb</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">1111</span><span class="no">h</span><span class="c1">; DX=DX-1111-CF</span>
</span></code></pre></div>
</li>
<li>
<p><code>CMP</code> 指令用于比较两个操作数。它<strong>实际上是执行减法运算</strong>，但不存储结果，<strong>只更新标志寄存器</strong>。</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="nf">cmp</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">bx</span><span class="c1">;内部是做了减法ax-bx，但是抛弃了差，只影响标志寄存器</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="nf">je</span><span class="w"> </span><span class="no">they_are_equal</span><span class="c1">; 当ZF=1时则跳</span>
</span></code></pre></div>
</li>
</ul>
<h3 id="_26">跳转指令<a class="headerlink" href="#_26" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>abbr.</th>
<th>define</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ja</code></td>
<td>jump if above</td>
</tr>
<tr>
<td><code>jb</code></td>
<td>jump if below</td>
</tr>
<tr>
<td><code>jae</code></td>
<td>jump if above or equal</td>
</tr>
<tr>
<td><code>jbe</code></td>
<td>jum if below or equal</td>
</tr>
<tr>
<td><code>jg</code></td>
<td>jump if greater</td>
</tr>
<tr>
<td><code>jl</code></td>
<td>jump if less</td>
</tr>
<tr>
<td><code>jge</code></td>
<td>jump if greater or equal</td>
</tr>
<tr>
<td><code>jle</code></td>
<td>jum if less or equal</td>
</tr>
</tbody>
</table>
<h4 id="ja-jb-jae-jbe">ja, jb, jae, jbe<a class="headerlink" href="#ja-jb-jae-jbe" title="Permanent link">¶</a></h4>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p><code>ja</code>,<code>jb</code>,<code>jae</code>,<code>jbe</code>都是无符号数比较相关的跳转指令</p>
</div>
<ul>
<li>
<p><code>ja</code>: <strong>CF=0 &amp;&amp; ZF=0</strong></p>
</li>
<li>
<p><code>jb</code>: <strong>CF=1</strong> ，所以<code>jb</code>===<code>jc</code></p>
</li>
</ul>
<h4 id="jg-jl-jge-jle">jg, jl, jge, jle<a class="headerlink" href="#jg-jl-jge-jle" title="Permanent link">¶</a></h4>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p><code>jg</code>,<code>jl</code>,<code>jge</code>,<code>jle</code>都是有符号数比较相关的跳转指令</p>
</div>
<ul>
<li>
<p><code>jg</code>: <strong>SF==OF</strong></p>
</li>
<li>
<p><code>jl</code>: <strong>SF!=OF</strong></p>
</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="nf">cmp</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">bx</span><span class="w"> </span><span class="c1">;AX-BX=1, SF=0, OF=0 -&gt; AX&gt;BX</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="no">Fh</span>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bh</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="no">h</span>
</span><span id="__span-56-7"><a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="nf">cmp</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="no">bh</span><span class="w"> </span><span class="c1">;AH-BH=0FFh, SF=1, OF=1 -&gt; AX&gt;BX</span>
</span><span id="__span-56-8"><a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a>
</span><span id="__span-56-9"><a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-56-10"><a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bx</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-56-11"><a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a><span class="nf">cmp</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">bx</span><span class="w"> </span><span class="c1">;AX-BH=-1=0FFFFh, SF=1, OF=0 -&gt; AX&lt;BX</span>
</span><span id="__span-56-12"><a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a>
</span><span id="__span-56-13"><a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="no">h</span>
</span><span id="__span-56-14"><a id="__codelineno-56-14" name="__codelineno-56-14" href="#__codelineno-56-14"></a><span class="nf">mov</span><span class="w"> </span><span class="no">bh</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="no">Fh</span>
</span><span id="__span-56-15"><a id="__codelineno-56-15" name="__codelineno-56-15" href="#__codelineno-56-15"></a><span class="nf">cmp</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">bx</span><span class="w"> </span><span class="c1">;AX-BH=1, SF=0, OF=1 -&gt;AX&lt;BX</span>
</span></code></pre></div>
<h4 id="_27">短跳、近跳、远跳<a class="headerlink" href="#_27" title="Permanent link">¶</a></h4>
<ol>
<li>
<p>jmp short target</p>
</li>
<li>
<p>jmp near ptr target</p>
</li>
<li>
<p>jmp far ptr target</p>
</li>
</ol>
<ul>
<li>一般情况下，编译器会自动度量跳跃的距离，因此我们在写源程序的时候不需要加上short, near ptr, far ptr等类型修饰，可以简化成jmp target</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="5:3"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio"><input id="__tabbed_5_2" name="__tabbed_5" type="radio"><input id="__tabbed_5_3" name="__tabbed_5" type="radio"><div class="tabbed-labels"><label for="__tabbed_5_1">短跳</label><label for="__tabbed_5_2">近跳</label><label for="__tabbed_5_3">远跳</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ul>
<li>
<p>jmp 偏移地址或标号</p>
</li>
<li>
<p>以下条件跳转指令也属于短跳：jc, jnc, jo, jno, js, jns, jz, jnz, ja, jb, jae, jbe, jg, jge, jl, jle, jp, jnp</p>
</li>
</ul>
<p><strong>短跳指令的机器码</strong>：</p>
<ul>
<li>
<p>短跳指令的机器码有2字节组成，第1个字节=<strong>EB</strong></p>
</li>
<li>
<p>第2个字节=△address=目标地址-下条指令的偏移地址</p>
</li>
<li>
<p>跳的范围很小，只能从 80h~7Fh (-128~127)</p>
</li>
</ul>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_4.png" data-desc-position="bottom"><img alt="alt text" src="../asm_4.png"></a></p>
</div>
<div class="tabbed-block">
<p><strong>近跳指令的3种格式</strong>：</p>
<ul>
<li>
<p>jmp 偏移地址或标号; 如jmp 1000h</p>
</li>
<li>
<p>jmp 16位寄存器   ; 如jmp bx</p>
</li>
<li>
<p>jmp 16位变量     ; 如jmp word ptr [addr]</p>
</li>
<li>
<p>注意是<strong>小端</strong>格式</p>
</li>
</ul>
<p><strong>近跳指令的机器码</strong>：
<a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_5.png" data-desc-position="bottom"><img alt="alt text" src="../asm_5.png"></a></p>
</div>
<div class="tabbed-block">
<p><strong>远跳指令的2种格式</strong>：</p>
<ul>
<li>
<p>jmp 段地址:偏移地址（直接定义<strong>机器码</strong>）</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="nl">main:</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="w">    </span><span class="nf">db</span><span class="w"> </span><span class="mi">0</span><span class="no">EAh</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="w">    </span><span class="nf">dw</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="w">    </span><span class="nf">dw</span><span class="w"> </span><span class="mi">0</span><span class="no">FFFFh</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="c1">;就会被翻译成机器码EA0000FFFF</span>
</span></code></pre></div>
</li>
<li>
<p>jmp dword ptr 32位变量</p>
</li>
</ul>
<p><strong>远跳指令的机器码</strong>：</p>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_6.png" data-desc-position="bottom"><img alt="alt text" src="../asm_6.png"></a></p>
</div>
</div>
</div>
<hr>
<h4 id="loop">循环指令：LOOP<a class="headerlink" href="#loop" title="Permanent link">¶</a></h4>
<ul>
<li>在 x86 汇编语言中，loop 指令用于实现循环控制。它会减少 cx 寄存器的值，然后检查 cx 是否为零。如果 cx 不为零，则跳转到指定的标签继续执行；如果 cx 为零，则继续执行下一条指令。</li>
</ul>
<div class="language-asm highlight"><span class="filename">求1+2+3的和</span><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">    </span><span class="nf">jcxz</span><span class="w"> </span><span class="no">done</span><span class="w"> </span><span class="c1">;jump if cx zero，防止cx为0时，进入一个巨大的循环！</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="nl">next:</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">cx</span><span class="c1">; ax +3 +2 +1</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="w">    </span><span class="nf">loop</span><span class="w"> </span><span class="no">nest</span><span class="w"> </span><span class="c1">; cx=2, 1, 0</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="w">              </span><span class="c1">; dec cx</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w">              </span><span class="c1">; jnz next</span>
</span></code></pre></div>
<h2 id="lec-12">Lec 12<a class="headerlink" href="#lec-12" title="Permanent link">¶</a></h2>
<h3 id="_28">浮点数运算<a class="headerlink" href="#_28" title="Permanent link">¶</a></h3>
<ul>
<li><code>fadd</code>,<code>fsub</code>,<code>fmul</code>,<code>fdiv</code>就是浮点数的加减乘除运算指令</li>
</ul>
<h4 id="fld-fild-fst-fstp">fld, fild, fst, fstp<a class="headerlink" href="#fld-fild-fst-fstp" title="Permanent link">¶</a></h4>
<div class="admonition info">
<p class="admonition-title">浮点寄存器</p>
<ul>
<li>
<p>在过去x86时期，浮点运算由专门的浮点寄存器来负责（FPU）</p>
</li>
<li>
<p>它包含了八个 <strong>80 位</strong>的浮点寄存器，通常标记为 <code>ST(0)</code> 到 <code>ST(7)</code>。（用括号来区分开浮点寄存器与数组）</p>
</li>
<li>
<p>这些寄存器组成了一个堆栈结构，称为浮点堆栈。浮点堆栈的操作类似于普通的堆栈操作，使用 <code>fld</code>、<code>fild</code>、<code>fst</code> 和 <code>fstp</code> 等指令来加载和存储浮点数。</p>
</li>
</ul>
</div>
<ul>
<li>
<p><code>fld</code>(load) 指令用于将浮点数加载到浮点堆栈顶。</p>
</li>
<li>
<p><code>fild</code>(load <strong>integer</strong>) 指令用于将整数加载到浮点堆栈顶。</p>
</li>
<li>
<p><code>fst</code>(store) 指令用于将<strong>浮点堆栈顶(<code>st(0)</code>)</strong>的值存储到内存中，但不弹出堆栈。</p>
</li>
<li>
<p><code>fstp</code>(store and pop) 指令用于将<strong>浮点堆栈顶(<code>st(0)</code>)</strong>的值存储到内存中，并<strong>弹出堆栈st(0)</strong>。</p>
</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="nf">data</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="nf">x</span><span class="w"> </span><span class="no">dt</span><span class="w"> </span><span class="mi">3</span><span class="no">.1415926535897932</span><span class="w"> </span><span class="c1">; long double x</span>
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="nf">y</span><span class="w"> </span><span class="no">dq</span><span class="w"> </span><span class="mi">9</span><span class="no">.375976525</span><span class="w">        </span><span class="c1">; double y</span>
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="nf">z</span><span class="w"> </span><span class="no">dd</span><span class="w"> </span><span class="mi">2</span><span class="no">.71828</span><span class="w">            </span><span class="c1">; float z</span>
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a><span class="nf">i</span><span class="w"> </span><span class="no">dd</span><span class="w"> </span><span class="mi">2</span><span class="w">                  </span><span class="c1">; long int i</span>
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a><span class="nf">r</span><span class="w"> </span><span class="no">dt</span><span class="w"> </span><span class="mi">0</span><span class="w">                  </span><span class="no">long</span><span class="w"> </span><span class="no">double</span><span class="w"> </span><span class="no">r</span>
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="nf">data</span><span class="w"> </span><span class="no">ends</span>
</span><span id="__span-59-8"><a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a><span class="nf">code</span><span class="w"> </span><span class="no">segment</span>
</span><span id="__span-59-9"><a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a><span class="nf">assume</span><span class="w"> </span><span class="no">cs</span><span class="p">:</span><span class="no">code</span><span class="p">,</span><span class="w"> </span><span class="no">ds</span><span class="p">:</span><span class="no">data</span>
</span><span id="__span-59-10"><a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a><span class="nl">main:</span>
</span><span id="__span-59-11"><a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">data</span>
</span><span id="__span-59-12"><a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-59-13"><a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a><span class="w">    </span><span class="nf">fild</span><span class="w"> </span><span class="p">[</span><span class="no">i</span><span class="p">]</span><span class="w">        </span><span class="c1">; st(0)=2</span>
</span><span id="__span-59-14"><a id="__codelineno-59-14" name="__codelineno-59-14" href="#__codelineno-59-14"></a><span class="w">    </span><span class="nf">fld</span><span class="w"> </span><span class="p">[</span><span class="no">x</span><span class="p">]</span><span class="w">         </span><span class="c1">; st(0)=3.141592..., st(1)=2</span>
</span><span id="__span-59-15"><a id="__codelineno-59-15" name="__codelineno-59-15" href="#__codelineno-59-15"></a><span class="w">    </span><span class="nf">fadd</span><span class="w"> </span><span class="no">st</span><span class="p">,</span><span class="w"> </span><span class="no">st</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">  </span><span class="c1">; st(0)=5.141592..., st(1)=2</span>
</span><span id="__span-59-16"><a id="__codelineno-59-16" name="__codelineno-59-16" href="#__codelineno-59-16"></a><span class="w">    </span><span class="nf">fld</span><span class="w"> </span><span class="p">[</span><span class="no">y</span><span class="p">]</span><span class="w">         </span><span class="c1">; st(0)=9.375976..., st(1)=5.141592..., st(2)=2</span>
</span><span id="__span-59-17"><a id="__codelineno-59-17" name="__codelineno-59-17" href="#__codelineno-59-17"></a><span class="w">    </span><span class="nf">fsub</span><span class="w"> </span><span class="no">st</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="no">st</span><span class="w">  </span><span class="c1">; st(0)=9.375976..., st(1)=-4.23438..., st(2)=2</span>
</span><span id="__span-59-18"><a id="__codelineno-59-18" name="__codelineno-59-18" href="#__codelineno-59-18"></a><span class="w">    </span><span class="nf">fstp</span><span class="w"> </span><span class="no">st</span><span class="w">         </span><span class="c1">; st(0)=-4.23438..., st(1)=2</span>
</span></code></pre></div>
<h3 id="_29">修改中断向量<a class="headerlink" href="#_29" title="Permanent link">¶</a></h3>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="nl">main:</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">data</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ds</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w">    </span><span class="nf">xor</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">es</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span><span class="w">      </span><span class="c1">;ES=0</span>
</span><span id="__span-60-6"><a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="mi">0</span><span class="p">]</span><span class="w">  </span><span class="c1">;AX=offset of int 00h</span>
</span><span id="__span-60-7"><a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="mi">2</span><span class="p">]</span><span class="w">  </span><span class="c1">;DX=seg of int 00h</span>
</span><span id="__span-60-8"><a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="w">    </span><span class="c1">; 把int 00h的中断向量映射的偏移地址和段地址取出来</span>
</span><span id="__span-60-9"><a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="w">    </span><span class="c1">; 保存到old_00h里</span>
</span><span id="__span-60-10"><a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">old_00h</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-60-11"><a id="__codelineno-60-11" name="__codelineno-60-11" href="#__codelineno-60-11"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">old_00h</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="no">dx</span>
</span><span id="__span-60-12"><a id="__codelineno-60-12" name="__codelineno-60-12" href="#__codelineno-60-12"></a>
</span><span id="__span-60-13"><a id="__codelineno-60-13" name="__codelineno-60-13" href="#__codelineno-60-13"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">word</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">my_00h</span>
</span><span id="__span-60-14"><a id="__codelineno-60-14" name="__codelineno-60-14" href="#__codelineno-60-14"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">word</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="no">es</span><span class="p">:[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">cs</span>
</span><span id="__span-60-15"><a id="__codelineno-60-15" name="__codelineno-60-15" href="#__codelineno-60-15"></a><span class="w">    </span><span class="c1">; 修改int 00h的中断向量为cs:[my_00h]</span>
</span><span id="__span-60-16"><a id="__codelineno-60-16" name="__codelineno-60-16" href="#__codelineno-60-16"></a>
</span><span id="__span-60-17"><a id="__codelineno-60-17" name="__codelineno-60-17" href="#__codelineno-60-17"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1234</span><span class="no">h</span>
</span><span id="__span-60-18"><a id="__codelineno-60-18" name="__codelineno-60-18" href="#__codelineno-60-18"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bl</span><span class="p">,</span><span class="w"> </span><span class="mi">00</span><span class="no">h</span>
</span><span id="__span-60-19"><a id="__codelineno-60-19" name="__codelineno-60-19" href="#__codelineno-60-19"></a><span class="nl">divide:</span>
</span><span id="__span-60-20"><a id="__codelineno-60-20" name="__codelineno-60-20" href="#__codelineno-60-20"></a><span class="w">    </span><span class="nf">div</span><span class="w"> </span><span class="no">bl</span>
</span><span id="__span-60-21"><a id="__codelineno-60-21" name="__codelineno-60-21" href="#__codelineno-60-21"></a><span class="w">    </span><span class="c1">; 除法溢出的时候会自动插入int 00h中断</span>
</span><span id="__span-60-22"><a id="__codelineno-60-22" name="__codelineno-60-22" href="#__codelineno-60-22"></a><span class="w">    </span><span class="c1">; 当int 00h发生时，将做一下操作：</span>
</span><span id="__span-60-23"><a id="__codelineno-60-23" name="__codelineno-60-23" href="#__codelineno-60-23"></a><span class="w">    </span><span class="c1">; pushf</span>
</span><span id="__span-60-24"><a id="__codelineno-60-24" name="__codelineno-60-24" href="#__codelineno-60-24"></a><span class="w">    </span><span class="c1">; push cs</span>
</span><span id="__span-60-25"><a id="__codelineno-60-25" name="__codelineno-60-25" href="#__codelineno-60-25"></a><span class="w">    </span><span class="c1">; push offset divide</span>
</span><span id="__span-60-26"><a id="__codelineno-60-26" name="__codelineno-60-26" href="#__codelineno-60-26"></a><span class="w">    </span><span class="c1">; jump dword ptr 0:[0]</span>
</span><span id="__span-60-27"><a id="__codelineno-60-27" name="__codelineno-60-27" href="#__codelineno-60-27"></a><span class="w">    </span><span class="c1">; int 00h</span>
</span><span id="__span-60-28"><a id="__codelineno-60-28" name="__codelineno-60-28" href="#__codelineno-60-28"></a><span class="nl">next:</span>
</span><span id="__span-60-29"><a id="__codelineno-60-29" name="__codelineno-60-29" href="#__codelineno-60-29"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="no">Ch</span>
</span><span id="__span-60-30"><a id="__codelineno-60-30" name="__codelineno-60-30" href="#__codelineno-60-30"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-60-31"><a id="__codelineno-60-31" name="__codelineno-60-31" href="#__codelineno-60-31"></a><span class="nl">my_00h:</span>
</span><span id="__span-60-32"><a id="__codelineno-60-32" name="__codelineno-60-32" href="#__codelineno-60-32"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">bp</span>
</span><span id="__span-60-33"><a id="__codelineno-60-33" name="__codelineno-60-33" href="#__codelineno-60-33"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bp</span><span class="p">,</span><span class="w"> </span><span class="no">sp</span>
</span><span id="__span-60-34"><a id="__codelineno-60-34" name="__codelineno-60-34" href="#__codelineno-60-34"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">word</span><span class="w"> </span><span class="no">ptr</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-60-35"><a id="__codelineno-60-35" name="__codelineno-60-35" href="#__codelineno-60-35"></a><span class="w">    </span><span class="c1">; 把返回地址+2，原值=offset divide</span>
</span><span id="__span-60-36"><a id="__codelineno-60-36" name="__codelineno-60-36" href="#__codelineno-60-36"></a><span class="w">    </span><span class="c1">; +2后跳到下一条地址（相当于PC+4）</span>
</span><span id="__span-60-37"><a id="__codelineno-60-37" name="__codelineno-60-37" href="#__codelineno-60-37"></a><span class="w">    </span><span class="nf">pop</span><span class="w"> </span><span class="no">bp</span>
</span><span id="__span-60-38"><a id="__codelineno-60-38" name="__codelineno-60-38" href="#__codelineno-60-38"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-60-39"><a id="__codelineno-60-39" name="__codelineno-60-39" href="#__codelineno-60-39"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">dx</span>
</span><span id="__span-60-40"><a id="__codelineno-60-40" name="__codelineno-60-40" href="#__codelineno-60-40"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-60-41"><a id="__codelineno-60-41" name="__codelineno-60-41" href="#__codelineno-60-41"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">dl</span><span class="p">,</span><span class="w"> </span><span class="err">'</span><span class="no">D</span><span class="err">'</span>
</span><span id="__span-60-42"><a id="__codelineno-60-42" name="__codelineno-60-42" href="#__codelineno-60-42"></a><span class="w">    </span><span class="nf">int</span><span class="w"> </span><span class="mi">21</span><span class="no">h</span>
</span><span id="__span-60-43"><a id="__codelineno-60-43" name="__codelineno-60-43" href="#__codelineno-60-43"></a><span class="w">    </span><span class="nf">pop</span><span class="w"> </span><span class="no">dx</span>
</span><span id="__span-60-44"><a id="__codelineno-60-44" name="__codelineno-60-44" href="#__codelineno-60-44"></a><span class="w">    </span><span class="nf">pop</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-60-45"><a id="__codelineno-60-45" name="__codelineno-60-45" href="#__codelineno-60-45"></a><span class="w">    </span><span class="nf">iret</span><span class="c1">; 中断返回</span>
</span><span id="__span-60-46"><a id="__codelineno-60-46" name="__codelineno-60-46" href="#__codelineno-60-46"></a><span class="w">        </span><span class="c1">; CPU执行iret时会有以下动作</span>
</span><span id="__span-60-47"><a id="__codelineno-60-47" name="__codelineno-60-47" href="#__codelineno-60-47"></a><span class="w">        </span><span class="c1">; pop ip</span>
</span><span id="__span-60-48"><a id="__codelineno-60-48" name="__codelineno-60-48" href="#__codelineno-60-48"></a><span class="w">        </span><span class="c1">; pop cs</span>
</span><span id="__span-60-49"><a id="__codelineno-60-49" name="__codelineno-60-49" href="#__codelineno-60-49"></a><span class="w">        </span><span class="c1">; popf</span>
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">对于代码中修改跳回地址的操作</p>
<ul>
<li>在执行<code>int 00h</code>的时候，堆栈其实是这样的</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="err">假设初始</span><span class="nf">sp</span><span class="err">=</span><span class="mi">2000</span><span class="no">h</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="nl">ss:</span><span class="err">1</span><span class="nf">FF8</span><span class="w"> </span><span class="no">old</span><span class="w"> </span><span class="no">bp</span><span class="w">        </span><span class="err">&lt;</span><span class="p">-</span><span class="w"> </span><span class="no">bp</span><span class="w"> </span><span class="c1">;执行push bp时</span>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="nl">ss:</span><span class="err">1</span><span class="nf">FFA</span><span class="w"> </span><span class="no">offset</span><span class="w"> </span><span class="no">divide</span><span class="w"> </span><span class="err">&lt;</span><span class="p">-</span><span class="w"> </span><span class="no">sp</span><span class="w"> </span><span class="c1">;执行int 00h时</span>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a><span class="nl">ss:</span><span class="err">1</span><span class="nf">FFC</span><span class="w"> </span><span class="no">CS</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="nl">ss:</span><span class="err">1</span><span class="nf">FFE</span><span class="w"> </span><span class="no">FL</span>
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a><span class="nl">ss:</span><span class="err">2000</span>
</span></code></pre></div>
<ul>
<li>所以<code>add word ptr [bp+2], 2</code>就会对<code>ss:1FFA</code>初的offset divide进行修改，把返回地址给改了</li>
</ul>
</div>
<h3 id="call-ret">函数调用 call, ret<a class="headerlink" href="#call-ret" title="Permanent link">¶</a></h3>
<ul>
<li>函数调用有三种形式：</li>
</ul>
<ol>
<li>寄存器传递</li>
</ol>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="nl">f:</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="w">    </span><span class="nf">ret</span>
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="nl">main:</span>
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="c1">;ax就是f()的参数</span>
</span><span id="__span-62-6"><a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a><span class="w">    </span><span class="nf">call</span><span class="w"> </span><span class="no">f</span>
</span></code></pre></div>
<ol start="2">
<li>变量传递</li>
</ol>
<ul>
<li>不能支持多线程，因为传递的是全局变量，如果变量在另一处被修改了，函数最后结果也会发生变化</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="nl">f:</span>
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">var</span><span class="p">]</span>
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="no">ax</span><span class="c1">;     ax就是函数值</span>
</span><span id="__span-63-4"><a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a><span class="w">    </span><span class="nf">ret</span>
</span><span id="__span-63-5"><a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a><span class="nl">main:</span>
</span><span id="__span-63-6"><a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="p">[</span><span class="no">var</span><span class="p">],</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-63-7"><a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a><span class="w">    </span><span class="nf">call</span><span class="w"> </span><span class="no">f</span>
</span></code></pre></div>
<ol start="3">
<li>堆栈传递</li>
</ol>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="nl">f:</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">bp</span>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bp</span><span class="p">,</span><span class="w"> </span><span class="no">sp</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="c1">;从堆栈中取得参数</span>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="mi">6</span><span class="p">]</span>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="w">    </span><span class="nf">pop</span><span class="w"> </span><span class="no">bp</span>
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="w">    </span><span class="nf">ret</span>
</span><span id="__span-64-8"><a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="nl">main:</span>
</span><span id="__span-64-9"><a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-64-10"><a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span><span class="w"> </span><span class="c1">;参数压入堆栈</span>
</span><span id="__span-64-11"><a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-64-12"><a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-64-13"><a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a><span class="w">    </span><span class="nf">call</span><span class="w"> </span><span class="no">f</span>
</span><span id="__span-64-14"><a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a><span class="nl">back:</span>
</span><span id="__span-64-15"><a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">sp</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="c1">; 就是别再指向push进去的ax了</span>
</span><span id="__span-64-16"><a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a>
</span><span id="__span-64-17"><a id="__codelineno-64-17" name="__codelineno-64-17" href="#__codelineno-64-17"></a><span class="err">--------------</span>
</span><span id="__span-64-18"><a id="__codelineno-64-18" name="__codelineno-64-18" href="#__codelineno-64-18"></a><span class="err">栈结构：</span>
</span><span id="__span-64-19"><a id="__codelineno-64-19" name="__codelineno-64-19" href="#__codelineno-64-19"></a><span class="err">设初始</span><span class="nf">sp</span><span class="err">=</span><span class="mi">2000</span><span class="no">h</span>
</span><span id="__span-64-20"><a id="__codelineno-64-20" name="__codelineno-64-20" href="#__codelineno-64-20"></a>
</span><span id="__span-64-21"><a id="__codelineno-64-21" name="__codelineno-64-21" href="#__codelineno-64-21"></a><span class="nl">ss:</span><span class="err">1</span><span class="nf">FF8</span><span class="w"> </span><span class="no">old_bp</span><span class="w"> </span><span class="err">&lt;</span><span class="p">-</span><span class="no">bp</span><span class="err">=</span><span class="no">sp</span><span class="w"> </span>
</span><span id="__span-64-22"><a id="__codelineno-64-22" name="__codelineno-64-22" href="#__codelineno-64-22"></a><span class="no">ss</span><span class="p">:</span><span class="mi">1</span><span class="no">FFA</span><span class="w"> </span><span class="no">return</span><span class="w"> </span><span class="no">address</span>
</span><span id="__span-64-23"><a id="__codelineno-64-23" name="__codelineno-64-23" href="#__codelineno-64-23"></a><span class="nl">ss:</span><span class="err">1</span><span class="nf">FFC</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-64-24"><a id="__codelineno-64-24" name="__codelineno-64-24" href="#__codelineno-64-24"></a><span class="nl">ss:</span><span class="err">1</span><span class="nf">FFE</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span>
</span><span id="__span-64-25"><a id="__codelineno-64-25" name="__codelineno-64-25" href="#__codelineno-64-25"></a><span class="no">ss</span><span class="p">:</span><span class="mi">2000</span><span class="w"> </span><span class="err">??</span>
</span></code></pre></div>
<h4 id="retf">远调用，retf<a class="headerlink" href="#retf" title="Permanent link">¶</a></h4>
<ul>
<li>
<p>远调用（Far Call） 指令用于调用位于不同代码段的子程序。远调用不仅保存当前的指令指针（IP），还保存当前的代码段选择子（CS），以便在返回时能够正确恢复。</p>
</li>
<li>
<p>远调用需要搭配<strong>远指针</strong>使用</p>
</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="nf">CALL</span><span class="w"> </span><span class="no">FAR</span><span class="w"> </span><span class="no">PTR</span><span class="w"> </span><span class="no">segment</span><span class="p">:</span><span class="no">offset</span>
</span></code></pre></div>
<ul>
<li><strong>RETF</strong>（Return Far） 指令用于从远调用的子程序返回。RETF 指令从堆栈中弹出返回地址和代码段，并跳转到该地址继续执行。</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Example--远调用</p>
<p><em>1000:2000</em>   <strong>call 1234:5678</strong></p>
<p>此时会<strong>push</strong> 1000h，再<strong>push</strong> 2005h（即下一条指令的offset）</p>
<p>最后<strong>jmp</strong> 1234:5678</p>
<p><em>1000:2005</em>   <strong>mov ah, 4Ch</strong></p>
<p><em>1000:2007</em>   <strong>int 21h</strong></p>
<p>...</p>
<p><em>1234:5678</em>   ...</p>
<p>...  <strong>retf</strong> </p>
<p>执行retf，就返回ip和cs；即<strong>pop ip, pop cs</strong></p>
</div>
<h3 id="int-iret">int, iret<a class="headerlink" href="#int-iret" title="Permanent link">¶</a></h3>
<ul>
<li>
<p><code>int 21h</code> 对应的函数首地址保存在 0:84h(因为中断向量表从0:0h开始，然后每个是4，所以0:21*4h) 处, 该地址是一个远指针。</p>
</li>
<li>
<p>dword ptr 0:[84h] 称为 int 21h 的中断向量(其实是它的函数首地址)</p>
</li>
<li>
<p><span class="arithmatex">\(n\)</span> 的取值范围是[00, FF], 所以 256 个中断向量会占用 0:0~0:3FF 之间共 400h 个字节的内存，这块区域称为 中断向量表。</p>
</li>
</ul>
<hr>
<p><strong>当我们执行<code>int 21h</code>时，发生了什么？</strong>：</p>
<ul>
<li>
<p>cpu做了一下4件事（和risc-v里的中断跳转有点像）：</p>
<ol>
<li>
<p>pushf</p>
</li>
<li>
<p>push cs</p>
</li>
<li>
<p>push 下一条指令的offset</p>
</li>
<li>
<p>jmp dword ptr 0:[84h]</p>
</li>
</ol>
</li>
<li>
<p>当中断服务执行完后有一个<strong>iret</strong>指令（类似于<code>mret</code>），供我们返回中断位置的下一条指令</p>
</li>
<li>
<p>当执行iret时，cpu做了一下3件事情</p>
<ol>
<li>
<p>pop ip</p>
</li>
<li>
<p>pop cs</p>
</li>
<li>
<p>popf</p>
</li>
</ol>
</li>
</ul>
<h2 id="lec-13">Lec 13<a class="headerlink" href="#lec-13" title="Permanent link">¶</a></h2>
<h3 id="_30">逻辑运算指令<a class="headerlink" href="#_30" title="Permanent link">¶</a></h3>
<p><code>AND</code>, <code>OR</code>, <code>XOR</code>, <code>NOT</code>, <code>TEST</code></p>
<ul>
<li>主要介绍<code>TEST</code>指令，在 x86 汇编语言中，TEST 指令用于执行<strong>按位与（AND）</strong>操作，但<strong>不存储结果</strong>（就像cmp和sub）只更新标志寄存器。它通常用于测试寄存器或内存位置中的<strong>特定位</strong>是否设置。</li>
</ul>
<div class="language-asm highlight"><span class="filename">test msb is one</span><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">9234</span><span class="no">h</span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="nf">test</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">8000</span><span class="no">h</span><span class="w"> </span><span class="c1">; 结果就是8000h，ZF=0, AX=9234h</span>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a><span class="nf">jnz</span><span class="w"> </span><span class="no">msb_is_one</span><span class="w"> </span><span class="c1">; 和8000h按位与之后不为0，则说明最高位是1</span>
</span></code></pre></div>
<h3 id="_31">移位指令<a class="headerlink" href="#_31" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>指令</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>shl</code></td>
<td>逻辑左移</td>
</tr>
<tr>
<td><code>shr</code></td>
<td>逻辑右移</td>
</tr>
<tr>
<td><code>sal</code></td>
<td>算术左移</td>
</tr>
<tr>
<td><code>sar</code></td>
<td>算术右移</td>
</tr>
<tr>
<td><code>rol</code></td>
<td>循环左移</td>
</tr>
<tr>
<td><code>ror</code></td>
<td>循环右移</td>
</tr>
<tr>
<td><code>rcl</code></td>
<td>将{CF,operand}一起循环左移</td>
</tr>
<tr>
<td><code>rcr</code></td>
<td>将{operand,CF}一起循环右移</td>
</tr>
</tbody>
</table>
<div class="language-asm highlight"><span class="filename">rcr</span><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="nf">rcr</span><span class="w"> </span><span class="no">ah</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w">   </span><span class="c1">;AH=1011 0110   CF=1 移位前</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="w">            </span><span class="c1">;AH=1101 1011   CF=0 移位后</span>
</span></code></pre></div>
<div class="language-asm highlight"><span class="filename">例：将1234ABCDh逻辑左移3位</span><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">1234</span><span class="no">h</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="no">ABCDh</span>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">cx</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-68-4"><a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a><span class="nl">next:</span>
</span><span id="__span-68-5"><a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a><span class="w">    </span><span class="nf">shl</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="c1">; CF=1</span>
</span><span id="__span-68-6"><a id="__codelineno-68-6" name="__codelineno-68-6" href="#__codelineno-68-6"></a><span class="w">    </span><span class="nf">rcl</span><span class="w"> </span><span class="no">dx</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="c1">; dx左移产生的最右端空洞完美地用CF来补全</span>
</span><span id="__span-68-7"><a id="__codelineno-68-7" name="__codelineno-68-7" href="#__codelineno-68-7"></a><span class="w">    </span><span class="nf">loop</span><span class="w"> </span><span class="no">next</span>
</span></code></pre></div>
<h3 id="_32">字符串操作指令<a class="headerlink" href="#_32" title="Permanent link">¶</a></h3>
<h4 id="_33">字符串传送指令<a class="headerlink" href="#_33" title="Permanent link">¶</a></h4>
<p><code>movsb</code>, <code>movsw</code>, <code>movsd</code></p>
<details class="info">
<summary>C语言中的类似指令</summary>
<p><code>memcpy(void *t, void *s, int n)</code>;
<code>memmove(void *t, void *s, int n)</code>;
<code>strcpy(char *t, char *s)</code>;
<code>strncpy(char *t, char *s, int n)</code>;</p>
</details>
<ul>
<li>
<p>在 x86 汇编语言中，<code>MOVSB</code> 指令用于将一个字节从源地址复制到目标地址。它是 "Move String Byte" 的缩写。<code>MOVSB</code> 指令通常用于字符串操作，特别是在需要复制或移动内存块时。</p>
</li>
<li>
<p>将 <code>DS:SI</code> 指向的源地址的字节复制到 <code>ES:DI</code> 指向的目标地址。</p>
</li>
<li>
<p>根据方向标志（DF）的值自动更新 SI 和 DI 寄存器：</p>
<ul>
<li>
<p>如果 DF 为 0（清除状态），则 SI 和 DI 增加 1。</p>
</li>
<li>
<p>如果 DF 为 1（设置状态），则 SI 和 DI 减少 1。</p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>为了达到类似memcpy的效果，我们可以采用<code>rep movsb</code>，其中<code>rep</code>是repeat</li>
</ul>
<details class="tip">
<summary>rep, repe, repne</summary>
<ul>
<li>
<p><code>rep</code> 前缀用于重复执行后面的字符串操作指令，直到 CX 寄存器的值变为零。每次执行指令后，CX 寄存器的值减 1。</p>
</li>
<li>
<p><code>repe</code> 前缀用于重复执行后面的字符串操作指令，直到 CX 寄存器的值变为零或零标志（ZF==0）。每次执行指令后，CX 寄存器的值减 1。</p>
</li>
<li>
<p>repne 前缀用于重复执行后面的字符串操作指令，直到 CX 寄存器的值变为零或零标志（ZF==1）。每次执行指令后，CX 寄存器的值减 1。</p>
</li>
</ul>
</details>
<div class="language-cpp highlight"><span class="filename">rep movsb的操作细分</span><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="nl">again</span><span class="p">:</span>
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a><span class="k">if</span><span class="p">(</span><span class="n">cx</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a><span class="w">    </span><span class="k">goto</span><span class="w"> </span><span class="n">done</span><span class="p">;</span>
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a><span class="n">byte</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">es</span><span class="o">:</span><span class="p">[</span><span class="n">di</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">ds</span><span class="o">:</span><span class="p">[</span><span class="n">si</span><span class="p">]</span>
</span><span id="__span-69-5"><a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a><span class="k">if</span><span class="p">(</span><span class="n">df</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
</span><span id="__span-69-6"><a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a><span class="w">    </span><span class="n">si</span><span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="n">di</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-69-7"><a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a><span class="p">}</span>
</span><span id="__span-69-8"><a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a><span class="k">else</span><span class="p">{</span>
</span><span id="__span-69-9"><a id="__codelineno-69-9" name="__codelineno-69-9" href="#__codelineno-69-9"></a><span class="w">    </span><span class="n">si</span><span class="o">--</span><span class="p">;</span><span class="w"> </span><span class="n">di</span><span class="o">--</span><span class="p">;</span>
</span><span id="__span-69-10"><a id="__codelineno-69-10" name="__codelineno-69-10" href="#__codelineno-69-10"></a><span class="p">}</span>
</span><span id="__span-69-11"><a id="__codelineno-69-11" name="__codelineno-69-11" href="#__codelineno-69-11"></a><span class="n">cx</span><span class="o">--</span><span class="p">;</span>
</span><span id="__span-69-12"><a id="__codelineno-69-12" name="__codelineno-69-12" href="#__codelineno-69-12"></a><span class="k">goto</span><span class="w"> </span><span class="n">again</span>
</span><span id="__span-69-13"><a id="__codelineno-69-13" name="__codelineno-69-13" href="#__codelineno-69-13"></a><span class="nl">done</span><span class="p">:</span>
</span></code></pre></div>
<div class="language-cpp highlight"><span class="filename">单独movsb指令的操作细分</span><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="n">byte</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">es</span><span class="o">:</span><span class="p">[</span><span class="n">di</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">ds</span><span class="o">:</span><span class="p">[</span><span class="n">si</span><span class="p">]</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="k">if</span><span class="p">(</span><span class="n">df</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="w">    </span><span class="n">si</span><span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="n">di</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="p">}</span>
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a><span class="k">else</span><span class="p">{</span>
</span><span id="__span-70-6"><a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a><span class="w">    </span><span class="n">si</span><span class="o">--</span><span class="p">;</span><span class="w"> </span><span class="n">di</span><span class="o">--</span><span class="p">;</span>
</span><span id="__span-70-7"><a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a><span class="p">}</span>
</span></code></pre></div>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_7.png" data-desc-position="bottom"><img alt="alt text" src="../asm_7.png"></a></p>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_8.png" data-desc-position="bottom"><img alt="alt text" src="../asm_8.png"></a></p>
<hr>
<h4 id="_34">字符串比较指令<a class="headerlink" href="#_34" title="Permanent link">¶</a></h4>
<p><code>cmpsb</code>, <code>cmpsw</code>, <code>cmpsd</code></p>
<ul>
<li>
<p>比较两个内存块，<code>ds:[si]</code>和<code>es:[di]</code>；也是使用DF来控制方向</p>
</li>
<li>
<p>repe：ZF=1时重复；    repne：ZF=0时重复</p>
</li>
<li>
<p>repe cmpsb（本次比较相等则继续比较下一个）</p>
</li>
<li>
<p>repne cmpsb（若本次比较不等则继续比较下一个）</p>
</li>
</ul>
<div class="language-cpp highlight"><span class="filename">repe cmpsb（本次比较相等则继续比较下一个）</span><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="nl">again</span><span class="p">:</span>
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="k">if</span><span class="p">(</span><span class="n">cx</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">done</span><span class="p">;</span>
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a><span class="n">比较</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">ds</span><span class="o">:</span><span class="p">[</span><span class="n">si</span><span class="p">]</span><span class="n">与</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="n">es</span><span class="o">:</span><span class="p">[</span><span class="n">di</span><span class="p">]</span>
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a><span class="k">if</span><span class="p">(</span><span class="n">df</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
</span><span id="__span-71-5"><a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a><span class="w">    </span><span class="n">si</span><span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="n">di</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-71-6"><a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a><span class="p">}</span>
</span><span id="__span-71-7"><a id="__codelineno-71-7" name="__codelineno-71-7" href="#__codelineno-71-7"></a><span class="k">else</span><span class="p">{</span>
</span><span id="__span-71-8"><a id="__codelineno-71-8" name="__codelineno-71-8" href="#__codelineno-71-8"></a><span class="w">    </span><span class="n">si</span><span class="o">--</span><span class="p">;</span><span class="w"> </span><span class="n">di</span><span class="o">--</span><span class="p">;</span>
</span><span id="__span-71-9"><a id="__codelineno-71-9" name="__codelineno-71-9" href="#__codelineno-71-9"></a><span class="p">}</span>
</span><span id="__span-71-10"><a id="__codelineno-71-10" name="__codelineno-71-10" href="#__codelineno-71-10"></a><span class="n">cx</span><span class="o">--</span><span class="p">;</span>
</span><span id="__span-71-11"><a id="__codelineno-71-11" name="__codelineno-71-11" href="#__codelineno-71-11"></a><span class="k">goto</span><span class="w"> </span><span class="n">again</span><span class="p">;</span>
</span></code></pre></div>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_9.png" data-desc-position="bottom"><img alt="alt text" src="../asm_9.png"></a></p>
<h4 id="_35">字符串扫描指令<a class="headerlink" href="#_35" title="Permanent link">¶</a></h4>
<p><code>scasb</code>, <code>scasw</code>, <code>scasd</code></p>
<ul>
<li>在 x86 汇编语言中，SCASB 指令用于扫描字符串中的字节，比较 <code>AL</code> 寄存器中的值与 <code>ES:DI</code> 指向的内存位置的字节。SCASB 是 "Scan String Byte" 的缩写。</li>
</ul>
<div class="language-cpp highlight"><span class="filename">scasb</span><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="nl">scasb</span><span class="p">:</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="w">    </span><span class="n">cmp</span><span class="w"> </span><span class="n">al</span><span class="p">,</span><span class="w"> </span><span class="n">es</span><span class="o">:</span><span class="p">[</span><span class="n">di</span><span class="p">]</span>
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a><span class="w">    </span><span class="n">di</span><span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="n">当DF</span><span class="o">=</span><span class="mi">1</span><span class="n">时</span><span class="err">，</span><span class="n">为di</span><span class="o">--</span>
</span></code></pre></div>
<div class="language-cpp highlight"><span class="filename">repne scasb伪代码</span><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="n">repne</span><span class="w"> </span><span class="n">scasb</span><span class="o">:</span>
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a><span class="nl">next</span><span class="p">:</span>
</span><span id="__span-73-3"><a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">cx</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">done</span><span class="p">;</span>
</span><span id="__span-73-4"><a id="__codelineno-73-4" name="__codelineno-73-4" href="#__codelineno-73-4"></a><span class="w">    </span><span class="n">cmp</span><span class="w"> </span><span class="n">al</span><span class="p">,</span><span class="w"> </span><span class="n">es</span><span class="o">:</span><span class="p">[</span><span class="n">di</span><span class="p">]</span>
</span><span id="__span-73-5"><a id="__codelineno-73-5" name="__codelineno-73-5" href="#__codelineno-73-5"></a><span class="w">    </span><span class="n">di</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-73-6"><a id="__codelineno-73-6" name="__codelineno-73-6" href="#__codelineno-73-6"></a><span class="w">    </span><span class="n">cx</span><span class="o">--</span><span class="p">;</span>
</span><span id="__span-73-7"><a id="__codelineno-73-7" name="__codelineno-73-7" href="#__codelineno-73-7"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">cmp</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span>
</span><span id="__span-73-8"><a id="__codelineno-73-8" name="__codelineno-73-8" href="#__codelineno-73-8"></a><span class="w">        </span><span class="k">goto</span><span class="w"> </span><span class="n">done</span><span class="p">;</span>
</span><span id="__span-73-9"><a id="__codelineno-73-9" name="__codelineno-73-9" href="#__codelineno-73-9"></a><span class="w">    </span><span class="k">goto</span><span class="w"> </span><span class="n">next</span><span class="p">;</span>
</span><span id="__span-73-10"><a id="__codelineno-73-10" name="__codelineno-73-10" href="#__codelineno-73-10"></a><span class="nl">done</span><span class="p">:</span>
</span></code></pre></div>
<hr>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_10.png" data-desc-position="bottom"><img alt="alt text" src="../asm_10.png"></a>
<a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_11.png" data-desc-position="bottom"><img alt="alt text" src="../asm_11.png"></a></p>
<h4 id="_36">字符串读写<a class="headerlink" href="#_36" title="Permanent link">¶</a></h4>
<p><code>stosb</code>, <code>stosw</code>, <code>stosd</code>, <code>lodsb</code></p>
<ul>
<li>在 x86 汇编语言中，stosb 指令用于将 <code>AL</code> 寄存器中的字节存储到由 <code>ES:DI</code> 指向的内存位置，并根据方向标志（DF）自动更新 DI 寄存器。stosb 是 "Store String Byte" 的缩写。</li>
</ul>
<div class="language-cpp highlight"><span class="filename">stosb</span><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="nl">es</span><span class="p">:[</span><span class="n">di</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">al</span>
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a><span class="n">di</span><span class="o">++</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">DF</span><span class="o">=</span><span class="mi">1</span><span class="n">时为di</span><span class="o">--</span>
</span></code></pre></div>
<div class="language-cpp highlight"><span class="filename">rep stosb</span><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="nl">again</span><span class="p">:</span>
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">cx</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="n">done</span><span class="p">;</span>
</span><span id="__span-75-3"><a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a><span class="w">    </span><span class="nl">es</span><span class="p">:[</span><span class="n">di</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">al</span><span class="p">;</span>
</span><span id="__span-75-4"><a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a><span class="w">    </span><span class="n">di</span><span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="n">DF</span><span class="o">=</span><span class="mi">1</span><span class="n">时为di</span><span class="o">--</span>
</span><span id="__span-75-5"><a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a><span class="w">    </span><span class="n">cx</span><span class="o">--</span><span class="p">;</span>
</span><span id="__span-75-6"><a id="__codelineno-75-6" name="__codelineno-75-6" href="#__codelineno-75-6"></a><span class="w">    </span><span class="k">goto</span><span class="w"> </span><span class="n">agin</span><span class="p">;</span>
</span><span id="__span-75-7"><a id="__codelineno-75-7" name="__codelineno-75-7" href="#__codelineno-75-7"></a><span class="nl">done</span><span class="p">:</span>
</span></code></pre></div>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_12.png" data-desc-position="bottom"><img alt="alt text" src="../asm_12.png"></a></p>
<hr>
<p><code>lodsb</code></p>
<div class="language-cpp highlight"><span class="filename">lodsb</span><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="n">al</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ds</span><span class="o">:</span><span class="p">[</span><span class="n">si</span><span class="p">]</span>
</span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a><span class="n">si</span><span class="o">++</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">当DF</span><span class="o">=</span><span class="mi">1</span><span class="n">时</span><span class="err">，</span><span class="n">为si</span><span class="o">--</span>
</span></code></pre></div>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../asm_13.png" data-desc-position="bottom"><img alt="alt text" src="../asm_13.png"></a></p>
<h2 id="lec-14">Lec 14<a class="headerlink" href="#lec-14" title="Permanent link">¶</a></h2>
<h3 id="__cdecl">__cdecl<a class="headerlink" href="#__cdecl" title="Permanent link">¶</a></h3>
<ul>
<li>参数从右到左顺序压入堆栈，由调用者清理堆栈; 是 C 语言参数传递规范。</li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="nl">f:</span>
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">bp</span><span class="c1">; (4)</span>
</span><span id="__span-77-3"><a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bp</span><span class="p">,</span><span class="w"> </span><span class="no">sp</span>
</span><span id="__span-77-4"><a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="mi">4</span><span class="p">]</span><span class="c1">; arg0</span>
</span><span id="__span-77-5"><a id="__codelineno-77-5" name="__codelineno-77-5" href="#__codelineno-77-5"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="mi">6</span><span class="p">]</span><span class="c1">; arg1</span>
</span><span id="__span-77-6"><a id="__codelineno-77-6" name="__codelineno-77-6" href="#__codelineno-77-6"></a><span class="w">    </span><span class="nf">pop</span><span class="w"> </span><span class="no">bp</span><span class="c1">; (5)</span>
</span><span id="__span-77-7"><a id="__codelineno-77-7" name="__codelineno-77-7" href="#__codelineno-77-7"></a><span class="w">    </span><span class="nf">ret</span><span class="c1">; (6)</span>
</span><span id="__span-77-8"><a id="__codelineno-77-8" name="__codelineno-77-8" href="#__codelineno-77-8"></a><span class="nl">main:</span>
</span><span id="__span-77-9"><a id="__codelineno-77-9" name="__codelineno-77-9" href="#__codelineno-77-9"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="c1">; arg1</span>
</span><span id="__span-77-10"><a id="__codelineno-77-10" name="__codelineno-77-10" href="#__codelineno-77-10"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span><span class="c1">; (1)</span>
</span><span id="__span-77-11"><a id="__codelineno-77-11" name="__codelineno-77-11" href="#__codelineno-77-11"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="c1">; arg0</span>
</span><span id="__span-77-12"><a id="__codelineno-77-12" name="__codelineno-77-12" href="#__codelineno-77-12"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span><span class="c1">; (2)</span>
</span><span id="__span-77-13"><a id="__codelineno-77-13" name="__codelineno-77-13" href="#__codelineno-77-13"></a><span class="w">    </span><span class="nf">call</span><span class="w"> </span><span class="no">f</span><span class="c1">; (3)</span>
</span><span id="__span-77-14"><a id="__codelineno-77-14" name="__codelineno-77-14" href="#__codelineno-77-14"></a><span class="nl">here:</span>
</span><span id="__span-77-15"><a id="__codelineno-77-15" name="__codelineno-77-15" href="#__codelineno-77-15"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">sp</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="c1">; (7)</span>
</span></code></pre></div>
<ul>
<li>
<p>__cdecl 堆栈布局:</p>
<p>ss:1FF8 old bp &lt;- bp (4) </p>
<p>ss:1FFA here &lt;- (3)(5) </p>
<p>ss:1FFC 10 &lt;- (2)(6) </p>
<p>ss:1FFE 20 &lt;- (1)</p>
<p>ss:2000 &lt;- (7)</p>
</li>
</ul>
<hr>
<h3 id="_37">动态变量<a class="headerlink" href="#_37" title="Permanent link">¶</a></h3>
<div class="language-cpp highlight"><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">){</span>
</span><span id="__span-78-2"><a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"> </span><span class="c1">// c是局部动态变量</span>
</span><span id="__span-78-3"><a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a><span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-78-4"><a id="__codelineno-78-4" name="__codelineno-78-4" href="#__codelineno-78-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
</span><span id="__span-78-5"><a id="__codelineno-78-5" name="__codelineno-78-5" href="#__codelineno-78-5"></a><span class="p">}</span>
</span></code></pre></div>
<ul>
<li>上述的C语言代码可以翻译成一下汇编代码：   </li>
</ul>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="nl">f:</span>
</span><span id="__span-79-2"><a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">bp</span><span class="c1">;</span>
</span><span id="__span-79-3"><a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bp</span><span class="p">,</span><span class="w"> </span><span class="no">sp</span>
</span><span id="__span-79-4"><a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a><span class="w">    </span><span class="nf">sub</span><span class="w"> </span><span class="no">sp</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w">   </span><span class="c1">; 这里挖的坑是给局部动态变量c的</span>
</span><span id="__span-79-5"><a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="mi">4</span><span class="p">]</span>
</span><span id="__span-79-6"><a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="mi">6</span><span class="p">]</span>
</span><span id="__span-79-7"><a id="__codelineno-79-7" name="__codelineno-79-7" href="#__codelineno-79-7"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="p">[</span><span class="no">bp-2</span><span class="p">],</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-79-8"><a id="__codelineno-79-8" name="__codelineno-79-8" href="#__codelineno-79-8"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">bp-2</span><span class="p">]</span>
</span><span id="__span-79-9"><a id="__codelineno-79-9" name="__codelineno-79-9" href="#__codelineno-79-9"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">sp</span><span class="p">,</span><span class="w"> </span><span class="no">bp</span><span class="w">  </span><span class="c1">; 此时变量c死亡</span>
</span><span id="__span-79-10"><a id="__codelineno-79-10" name="__codelineno-79-10" href="#__codelineno-79-10"></a><span class="w">    </span><span class="nf">pop</span><span class="w"> </span><span class="no">bp</span>
</span><span id="__span-79-11"><a id="__codelineno-79-11" name="__codelineno-79-11" href="#__codelineno-79-11"></a><span class="w">    </span><span class="nf">ret</span>
</span><span id="__span-79-12"><a id="__codelineno-79-12" name="__codelineno-79-12" href="#__codelineno-79-12"></a><span class="nl">main:</span>
</span><span id="__span-79-13"><a id="__codelineno-79-13" name="__codelineno-79-13" href="#__codelineno-79-13"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span>
</span><span id="__span-79-14"><a id="__codelineno-79-14" name="__codelineno-79-14" href="#__codelineno-79-14"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-79-15"><a id="__codelineno-79-15" name="__codelineno-79-15" href="#__codelineno-79-15"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span>
</span><span id="__span-79-16"><a id="__codelineno-79-16" name="__codelineno-79-16" href="#__codelineno-79-16"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-79-17"><a id="__codelineno-79-17" name="__codelineno-79-17" href="#__codelineno-79-17"></a><span class="w">    </span><span class="nf">call</span><span class="w"> </span><span class="no">f</span>
</span><span id="__span-79-18"><a id="__codelineno-79-18" name="__codelineno-79-18" href="#__codelineno-79-18"></a><span class="nl">here:</span>
</span><span id="__span-79-19"><a id="__codelineno-79-19" name="__codelineno-79-19" href="#__codelineno-79-19"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">sp</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w">  </span><span class="c1">; 此时参数a,b死亡</span>
</span></code></pre></div>
<ul>
<li>
<p>执行上述代码时，堆栈布局如下：</p>
<p>ss:1FF6 30 ; 变量c</p>
<p>ss:1FF8 old_bp  &lt;- bp</p>
<p>ss:1FFA here</p>
<p>ss:1FFC 10</p>
<p>ss:1FFE 20</p>
<p>ss:2000 </p>
</li>
</ul>
<hr>
<h3 id="_38">递归<a class="headerlink" href="#_38" title="Permanent link">¶</a></h3>
<ul>
<li>形式和RISC-V差不多，都是反复堆栈来递归调用函数</li>
</ul>
<div class="language-cpp highlight"><span class="filename">c代码</span><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">){</span>
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-80-3"><a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-80-4"><a id="__codelineno-80-4" name="__codelineno-80-4" href="#__codelineno-80-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="o">+</span><span class="n">f</span><span class="p">(</span><span class="n">n</span><span class="mi">-1</span><span class="p">);</span>
</span><span id="__span-80-5"><a id="__codelineno-80-5" name="__codelineno-80-5" href="#__codelineno-80-5"></a><span class="p">}</span>
</span></code></pre></div>
<div class="language-asm highlight"><span class="filename">递归</span><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="nl">f:</span>
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">bp</span>
</span><span id="__span-81-3"><a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">bp</span><span class="p">,</span><span class="w"> </span><span class="no">sp</span>
</span><span id="__span-81-4"><a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="mi">4</span><span class="p">]</span>
</span><span id="__span-81-5"><a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a><span class="w">    </span><span class="nf">cmp</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-81-6"><a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a><span class="w">    </span><span class="nf">je</span><span class="w"> </span><span class="no">done</span>
</span><span id="__span-81-7"><a id="__codelineno-81-7" name="__codelineno-81-7" href="#__codelineno-81-7"></a><span class="w">    </span><span class="nf">dec</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-81-8"><a id="__codelineno-81-8" name="__codelineno-81-8" href="#__codelineno-81-8"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-81-9"><a id="__codelineno-81-9" name="__codelineno-81-9" href="#__codelineno-81-9"></a><span class="w">    </span><span class="nf">call</span><span class="w"> </span><span class="no">f</span>
</span><span id="__span-81-10"><a id="__codelineno-81-10" name="__codelineno-81-10" href="#__codelineno-81-10"></a><span class="nl">there:</span>
</span><span id="__span-81-11"><a id="__codelineno-81-11" name="__codelineno-81-11" href="#__codelineno-81-11"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">sp</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span><span id="__span-81-12"><a id="__codelineno-81-12" name="__codelineno-81-12" href="#__codelineno-81-12"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="no">bp</span><span class="err">+</span><span class="mi">4</span><span class="p">]</span>
</span><span id="__span-81-13"><a id="__codelineno-81-13" name="__codelineno-81-13" href="#__codelineno-81-13"></a><span class="nl">done:</span>
</span><span id="__span-81-14"><a id="__codelineno-81-14" name="__codelineno-81-14" href="#__codelineno-81-14"></a><span class="w">    </span><span class="nf">pop</span><span class="w"> </span><span class="no">bp</span>
</span><span id="__span-81-15"><a id="__codelineno-81-15" name="__codelineno-81-15" href="#__codelineno-81-15"></a><span class="w">    </span><span class="nf">ret</span>
</span><span id="__span-81-16"><a id="__codelineno-81-16" name="__codelineno-81-16" href="#__codelineno-81-16"></a><span class="nl">main:</span>
</span><span id="__span-81-17"><a id="__codelineno-81-17" name="__codelineno-81-17" href="#__codelineno-81-17"></a><span class="w">    </span><span class="nf">mov</span><span class="w"> </span><span class="no">ax</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-81-18"><a id="__codelineno-81-18" name="__codelineno-81-18" href="#__codelineno-81-18"></a><span class="w">    </span><span class="nf">push</span><span class="w"> </span><span class="no">ax</span>
</span><span id="__span-81-19"><a id="__codelineno-81-19" name="__codelineno-81-19" href="#__codelineno-81-19"></a><span class="w">    </span><span class="nf">call</span><span class="w"> </span><span class="no">f</span>
</span><span id="__span-81-20"><a id="__codelineno-81-20" name="__codelineno-81-20" href="#__codelineno-81-20"></a><span class="nl">here:</span>
</span><span id="__span-81-21"><a id="__codelineno-81-21" name="__codelineno-81-21" href="#__codelineno-81-21"></a><span class="w">    </span><span class="nf">add</span><span class="w"> </span><span class="no">sp</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
</span></code></pre></div>
<div class="language-text highlight"><pre><span></span><code>ss:1FF0 there&lt;-(8)(10)

ss:1FF2 1&lt;-(7)(11)

ss:1FF4 oldbp&lt;-bp(6)(12)

ss:1FF6 there&lt;-(5)(13)

ss:1FF8 2&lt;-(4)(14)

ss:1FFA oldbp&lt;-bp(3)(15)

ss:1FFC here &lt;-(2)(16)

ss:1FFE 3 &lt;-(1)(17)

ss:2000 &lt;-(18)
</code></pre></div>
<h2 id="_39">考试<a class="headerlink" href="#_39" title="Permanent link">¶</a></h2>
<p>理论考 45min 10道判断 25道单选</p>
<p>实验考 85min 2道函数题，2道填空题</p>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2025年7月15日 03:04:11 UTC">2025年7月15日</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2023-2024 <a herf="https://github.com/Wu-wu-u" target="_blank" rel="noopener">Wu-wu-u</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Wu-wu-u" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["toc.follow", "navigation.tabs", "navigation.top", "navigation.indexes", "content.code.copy", "content.code.annotate", "search.suggest", "search.highlight"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>